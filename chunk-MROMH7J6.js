import{a as Je,b as He,c as Ke,d as Ht}from"./chunk-VFVPOPTJ.js";import{a as Bt,b as Xe,c as Ye,d as ze,e as zt,f as Ne,g as et,h as Nt,i as tt,j as Ut,k as it,l as jt,m as Ue,n as je,o as Rt,p as Re}from"./chunk-RUDQNTH2.js";import{$ as k,$b as Pt,A as he,Ab as ke,B as ge,Ba as W,Bb as Y,C as st,Cb as Z,Da as Q,Db as xt,E as ct,Ea as ht,F as c,Fa as J,G as C,Ga as y,Gb as ae,Ha as N,Hb as T,Ia as We,Ib as vt,J as fe,Ja as gt,Jb as Ae,Ka as ve,Kb as De,L as ee,La as ye,Ma as ne,N as _e,Na as oe,O as _,Oa as Ie,Ob as yt,P as M,Pa as we,Pb as It,Q as u,Rb as wt,S as pt,Sa as Oe,Sb as Ot,T as $e,Ta as X,Tb as Le,U as te,Ua as Se,Va as ft,W as a,Wa as _t,Wb as Be,X as s,Xb as St,Y as I,Yb as p,Z as j,Zb as Tt,_ as R,_b as Mt,a as le,aa as S,ac as Et,b as qe,ba as x,bc as Ft,ca as m,cc as Vt,da as be,db as Te,dc as kt,ea as Ce,eb as de,ec as At,fa as xe,fc as Dt,ga as H,gc as re,ha as A,hb as bt,ia as D,ib as Qe,ja as ce,jc as Lt,ka as d,kb as Me,kc as me,l as lt,la as v,lb as Pe,m as ue,ma as O,mb as Ze,n as B,na as pe,o as se,oa as K,pa as G,q as V,qa as q,r as z,ra as dt,ta as mt,u as g,ua as $,ub as P,v as f,va as ie,vb as Ct,wa as ut,wb as Ee,yb as Fe,z as F,zb as Ve}from"./chunk-DF4LRA7J.js";var Kt=(()=>{let r=class r{createRegisterFormInvoice(e){return this.fb.group({invoice:this.fb.group({codClie:new p(e.codClie),codVend:new p(e.codVend),codUbic:new p(e.codUbic),descrip:new p(e.descrip),direc1:new p(e.direc1),direc2:new p(e.direc2),mtoTotal:new p(e.mtoTotal),tgravable:new p(e.tgravable),texento:new p(e.texento),monto:new p(e.monto),mtoTax:new p(e.mtoTax),contado:new p(e.contado),tipoCli:new p(e.tipoCli),fechaE:new p(e.fechaE),fechaV:new p(e.fechaV),Id3:new p(e.Id3),ordenC:new p(e.ordenC),telef:new p(e.telef),tipoFac:new p(e.tipoFac)}),items:this.fb.array([this.fb.group({codItem:new p(e.items[0].codItem),codUbic:new p(e.items[0].codUbic),codVend:new p(e.items[0].codVend),descrip1:new p(e.items[0].descrip1),priceO:new p(e.items[0].priceO),precio:new p(e.items[0].precio),cantidad:new p(e.items[0].cantidad),mtoTax:new p(e.items[0].mtoTax)})]),payments:this.fb.array([this.fb.group({monto:new p(e.payments[0].monto),codTarj:new p(e.payments[0].codTarj),fechae:new p(e.payments[0].fechae),descrip:new p(e.payments[0].descrip)})]),taxes:this.fb.array([this.fb.group({monto:new p(e.taxes[0].monto),codTaxs:new p(e.taxes[0].codTaxs),tgravable:new p(e.taxes[0].tgravable)})])})}submitInvoice(e){let n=JSON.parse(localStorage.getItem("userInfo")||"{}").pragma,l=new ft({Pragma:n}),h=`${this.api}adm/invoice`,b=[{invoice:e.get("invoice").value,items:e.get("items").value,payments:e.get("payments").value,taxes:e.get("taxes").value}];return this.http.post(h,b,{headers:l})}constructor(e,i){this.fb=e,this.http=i,this.api=me.api}};r.\u0275fac=function(i){return new(i||r)(se(re),se(_t))},r.\u0275prov=ue({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();var Gt=(()=>{let r=class r{constructor(e){this.fb=e}createDocumentoElectronicoForm(e){return this.fb.group({documentoElectronico:this.fb.group({encabezado:this.fb.group({identificacionDocumento:this.fb.group({tipoDocumento:new p(e.documentoElectronico.encabezado.identificacionDocumento.tipoDocumento),numeroDocumento:new p(e.documentoElectronico.encabezado.identificacionDocumento.numeroDocumento),tipoProveedor:new p(e.documentoElectronico.encabezado.identificacionDocumento.tipoProveedor),tipoTransaccion:new p(e.documentoElectronico.encabezado.identificacionDocumento.tipoTransaccion),numeroPlanillaImportacion:new p(e.documentoElectronico.encabezado.identificacionDocumento.numeroPlanillaImportacion),numeroExpedienteImportacion:new p(e.documentoElectronico.encabezado.identificacionDocumento.numeroExpedienteImportacion),serieFacturaAfectada:new p(e.documentoElectronico.encabezado.identificacionDocumento.serieFacturaAfectada),numeroFacturaAfectada:new p(e.documentoElectronico.encabezado.identificacionDocumento.numeroFacturaAfectada),fechaFacturaAfectada:new p(e.documentoElectronico.encabezado.identificacionDocumento.fechaFacturaAfectada),montoFacturaAfectada:new p(e.documentoElectronico.encabezado.identificacionDocumento.montoFacturaAfectada),comentarioFacturaAfectada:new p(e.documentoElectronico.encabezado.identificacionDocumento.comentarioFacturaAfectada),regimenEspTributacion:new p(e.documentoElectronico.encabezado.identificacionDocumento.regimenEspTributacion),fechaEmision:new p(e.documentoElectronico.encabezado.identificacionDocumento.fechaEmision),fechaVencimiento:new p(e.documentoElectronico.encabezado.identificacionDocumento.fechaVencimiento),horaEmision:new p(e.documentoElectronico.encabezado.identificacionDocumento.horaEmision),anulado:new p(e.documentoElectronico.encabezado.identificacionDocumento.anulado),tipoDePago:new p(e.documentoElectronico.encabezado.identificacionDocumento.tipoDePago),serie:new p(e.documentoElectronico.encabezado.identificacionDocumento.serie),sucursal:new p(e.documentoElectronico.encabezado.identificacionDocumento.sucursal),tipoDeVenta:new p(e.documentoElectronico.encabezado.identificacionDocumento.tipoDeVenta),moneda:new p(e.documentoElectronico.encabezado.identificacionDocumento.moneda),transaccionId:new p(e.documentoElectronico.encabezado.identificacionDocumento.transaccionId)}),vendedor:new p(e.documentoElectronico.encabezado.vendedor),comprador:this.fb.group({tipoIdentificacion:new p(e.documentoElectronico.encabezado.comprador.tipoIdentificacion),numeroIdentificacion:new p(e.documentoElectronico.encabezado.comprador.numeroIdentificacion),razonSocial:new p(e.documentoElectronico.encabezado.comprador.razonSocial),direccion:new p(e.documentoElectronico.encabezado.comprador.direccion),ubigeo:new p(e.documentoElectronico.encabezado.comprador.ubigeo),pais:new p(e.documentoElectronico.encabezado.comprador.pais),notificar:new p(e.documentoElectronico.encabezado.comprador.notificar),telefono:this.fb.array(e.documentoElectronico.encabezado.comprador.telefono.map(i=>new p(i))),correo:this.fb.array(e.documentoElectronico.encabezado.comprador.correo.map(i=>new p(i))),otrosEnvios:new p(e.documentoElectronico.encabezado.comprador.otrosEnvios)}),sujetoRetenido:new p(e.documentoElectronico.encabezado.sujetoRetenido),tercero:new p(e.documentoElectronico.encabezado.tercero),totales:this.createTotalesForm(e.documentoElectronico.encabezado.totales),totalesRetencion:new p(e.documentoElectronico.encabezado.totalesRetencion),totalesOtraMoneda:this.fb.group({moneda:new p(e.documentoElectronico.encabezado.totalesOtraMoneda.moneda),tipoCambio:new p(e.documentoElectronico.encabezado.totalesOtraMoneda.tipoCambio),montoGravadoTotal:new p(e.documentoElectronico.encabezado.totalesOtraMoneda.montoGravadoTotal),montoExentoTotal:new p(e.documentoElectronico.encabezado.totalesOtraMoneda.montoExentoTotal),subtotal:new p(e.documentoElectronico.encabezado.totalesOtraMoneda.subtotal),totalAPagar:new p(e.documentoElectronico.encabezado.totalesOtraMoneda.totalAPagar),totalIVA:new p(e.documentoElectronico.encabezado.totalesOtraMoneda.totalIVA),montoTotalConIVA:new p(e.documentoElectronico.encabezado.totalesOtraMoneda.montoTotalConIVA),montoEnLetras:new p(e.documentoElectronico.encabezado.totalesOtraMoneda.montoEnLetras),totalDescuento:new p(e.documentoElectronico.encabezado.totalesOtraMoneda.totalDescuento),listaDescBonificacion:this.fb.array(e.documentoElectronico.encabezado.totalesOtraMoneda.listaDescBonificacion.map(i=>this.fb.group({descDescuento:new p(i.descDescuento),montoDescuento:new p(i.montoDescuento)}))),impuestosSubtotal:this.fb.array(e.documentoElectronico.encabezado.totalesOtraMoneda.impuestosSubtotal.map(i=>this.fb.group({codigoTotalImp:new p(i.codigoTotalImp),alicuotaImp:new p(i.alicuotaImp),baseImponibleImp:new p(i.baseImponibleImp),valorTotalImp:new p(i.valorTotalImp)})))}),orden:new p(e.documentoElectronico.encabezado.orden)}),detallesItems:this.createDetallesItemsForm(e.documentoElectronico.detallesItems),detallesRetencion:new p(e.documentoElectronico.detallesRetencion),viajes:new p(e.documentoElectronico.viajes),infoAdicional:this.fb.array(e.documentoElectronico.infoAdicional.map(i=>this.fb.group({campo:new p(i.campo),valor:new p(i.valor)}))),guiaDespacho:new p(e.documentoElectronico.guiaDespacho),transporte:new p(e.documentoElectronico.transporte),esLote:new p(e.documentoElectronico.esLote),esMinimo:new p(e.documentoElectronico.esMinimo)})})}createTotalesForm(e){return this.fb.group({nroItems:new p(e.nroItems),montoGravadoTotal:new p(e.montoGravadoTotal),montoExentoTotal:new p(e.montoExentoTotal),subtotal:new p(e.subtotal),totalAPagar:new p(e.totalAPagar),totalIVA:new p(e.totalIVA),montoTotalConIVA:new p(e.montoTotalConIVA),montoEnLetras:new p(e.montoEnLetras),totalDescuento:new p(e.totalDescuento),listaDescBonificacion:this.fb.array(e.listaDescBonificacion.map(i=>this.fb.group({descDescuento:new p(i.descDescuento),montoDescuento:new p(i.montoDescuento)}))),impuestosSubtotal:this.fb.array(e.impuestosSubtotal.map(i=>this.fb.group({codigoTotalImp:new p(i.codigoTotalImp),alicuotaImp:new p(i.alicuotaImp),baseImponibleImp:new p(i.baseImponibleImp),valorTotalImp:new p(i.valorTotalImp)})))})}createDetallesItemsForm(e){return this.fb.array(e.map(i=>this.fb.group({cantidad:new p(i.cantidad),descripcion:new p(i.descripcion),precioUnitario:new p(i.precioUnitario),valorTotal:new p(i.valorTotal),descuento:new p(i.descuento),unidadMedida:new p(i.unidadMedida)})))}};r.\u0275fac=function(i){return new(i||r)(se(re))},r.\u0275prov=ue({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();function gi(o,r){if(o&1){let t=S();a(0,"div",26)(1,"label",27),d(2,"C\xE9dula:"),s(),a(3,"input",28),q("ngModelChange",function(i){g(t);let n=m();return G(n.idNumber,i)||(n.idNumber=i),f(i)}),s(),a(4,"label",29),d(5,"Tel\xE9fono:"),s(),a(6,"input",30),q("ngModelChange",function(i){g(t);let n=m();return G(n.phoneNumber,i)||(n.phoneNumber=i),f(i)}),s(),a(7,"label",31),d(8,"Correo:"),s(),a(9,"input",32),q("ngModelChange",function(i){g(t);let n=m();return G(n.email,i)||(n.email=i),f(i)}),s()()}if(o&2){let t=m();c(3),K("ngModel",t.idNumber),c(3),K("ngModel",t.phoneNumber),c(3),K("ngModel",t.email)}}function fi(o,r){if(o&1){let t=S();a(0,"div",26)(1,"label",33),d(2,"N\xFAmero de Lote:"),s(),a(3,"input",34),q("ngModelChange",function(i){g(t);let n=m();return G(n.batchNumber,i)||(n.batchNumber=i),f(i)}),s()()}if(o&2){let t=m();c(3),K("ngModel",t.batchNumber)}}function _i(o,r){if(o&1){let t=S();a(0,"tr")(1,"td"),d(2),s(),a(3,"td"),d(4),W(5,"number"),s(),a(6,"td"),d(7),W(8,"number"),s(),a(9,"td"),d(10),W(11,"number"),s(),a(12,"td")(13,"button",35),x("click",function(){let i=g(t).index,n=m();return f(n.removePayment(i))}),s()()()}if(o&2){let t=r.$implicit;c(2),v(t.tipoPago),c(2),O("Bs. ",Q(5,4,t.monto,"1.2-2"),""),c(3),O("$ ",Q(8,7,t.montoDolares,"1.2-2"),""),c(3),O("IGFT ",Q(11,10,t.igtf,"1.2-2"),"")}}var $t=(()=>{let r=class r{constructor(e,i,n,l,h,b,w,E,L,ai,ri){this.dialogConfig=e,this.registerInvoiceService=i,this.sharedService=n,this.fb=l,this.messageService=h,this.router=b,this.dialogRef=w,this.cd=E,this.invoiceFormService=L,this.theFactoryService=ai,this.registerTheFactoryInvoiceService=ri,this.isLoading=ee(!1),this.formattedTotalBs=0,this.selectedOption="",this.referenceNumber="",this.phoneNumber="",this.idNumber="",this.email="",this.batchNumber="",this.descrip=this.selectedOption,this.paymentsList=[],this.cxcItems=[],this.itemFactItems=[],this.invioceNumber=0,this.totalBs=this.dialogConfig.data.totalBs.toFixed(2),this.totalUsd=this.dialogConfig.data.totalUsd.toFixed(2)}ngOnInit(){this.formattedTotalBs=null,this.updateDropdownOptions(this.selectedOption),this.loadCorrelatives(),this.sharedService.prFactValueInt$.subscribe(i=>{this.prFactValueInt=i,console.log("Received prFactValueInt:",this.prFactValueInt)}),this.registerForm=this.registerInvoiceService.createRegisterFormInvoice({codClie:"",codVend:"",codUbic:"",descrip:"",direc1:"",direc2:"",mtoTotal:0,tgravable:0,texento:0,monto:0,mtoTax:0,contado:0,tipoCli:0,fechaE:"",fechaV:"",Id3:"",ordenC:"",telef:"",tipoFac:"",items:[{codItem:"",codUbic:"",codVend:"",descrip1:"",priceO:0,precio:0,cantidad:0,mtoTax:0}],payments:[{monto:0,codTarj:"",fechae:"",descrip:""}],taxes:[{monto:0,codTaxs:"",tgravable:0}]}),this.documentoElectronicoForm=this.registerTheFactoryInvoiceService.createDocumentoElectronicoForm({documentoElectronico:{encabezado:{identificacionDocumento:{tipoDocumento:"",numeroDocumento:"",tipoProveedor:"",tipoTransaccion:"",numeroPlanillaImportacion:"",numeroExpedienteImportacion:"",serieFacturaAfectada:"",numeroFacturaAfectada:"",fechaFacturaAfectada:"",montoFacturaAfectada:"",comentarioFacturaAfectada:"",regimenEspTributacion:"",fechaEmision:"",fechaVencimiento:"",horaEmision:"",anulado:!1,tipoDePago:"0",serie:"",sucursal:"",tipoDeVenta:"0",moneda:"",transaccionId:""},vendedor:"",comprador:{tipoIdentificacion:"",numeroIdentificacion:"",razonSocial:"",direccion:"",ubigeo:"",pais:"",notificar:"",telefono:[""],correo:[""],otrosEnvios:""},sujetoRetenido:"",tercero:"",totales:{nroItems:"0",montoGravadoTotal:"0",montoExentoTotal:"0",subtotal:"0",totalAPagar:"0",totalIVA:"0",montoTotalConIVA:"0",montoEnLetras:"",totalDescuento:"0",listaDescBonificacion:[{descDescuento:"",montoDescuento:"0"}],impuestosSubtotal:[{codigoTotalImp:"",alicuotaImp:"",baseImponibleImp:"0",valorTotalImp:"0"}],formasPago:[{descripcion:"",fecha:"",forma:"",monto:"0",moneda:"",tipoCambio:"0"}]},totalesRetencion:"",totalesOtraMoneda:{moneda:"",tipoCambio:"",montoGravadoTotal:"0",montoExentoTotal:"0",subtotal:"0",totalAPagar:"0",totalIVA:"0",montoTotalConIVA:"0",montoEnLetras:"",totalDescuento:"0",listaDescBonificacion:[{descDescuento:"",montoDescuento:"0"}],impuestosSubtotal:[{codigoTotalImp:"",alicuotaImp:"",baseImponibleImp:"0",valorTotalImp:"0"}]},orden:""},detallesItems:[{numeroLinea:"",codigoCIIU:"",codigoPLU:"",indicadorBienoServicio:"",descripcion:"",cantidad:"0",unidadMedida:"",precioUnitario:"0",precioUnitarioDescuento:"0",montoBonificacion:"0",descripcionBonificacion:"",descuentoMonto:"0",precioItem:"0",codigoImpuesto:"",tasaIVA:"",valorIVA:"0",valorTotalItem:"0",infoAdicionalItem:[],listaItemOTI:""}],detallesRetencion:"",viajes:"",infoAdicional:[{campo:"",valor:""}],guiaDespacho:"",transporte:"",esLote:"",esMinimo:""}}),this.sharedService.selectedCustomer$.subscribe(i=>{i&&(console.log("Cliente recibido en suscripci\xF3n:",i),this.updateForm(i))}),this.addItemsFromLocalStorage(),this.addItemsToDocumentoElectronicoFromLocalStorage(),console.log("Valor del formulario completo:",this.documentoElectronicoForm.value);let e=this.documentoElectronicoForm.get("documentoElectronico.detallesItems");console.log("Valor de detallesItems:",e.value),this.documentoElectronicoForm.get("documentoElectronico.detallesItems").valueChanges.subscribe(i=>{console.log("Cambios en detallesItems:",i)})}loadCorrelatives(){this.invoiceFormService.getCorrelatives().subscribe(e=>{if(console.log("Correlatives:",e),e.length>12){let i=e[12];this.prFactValueInt=i.valueint,console.log("PrFact valueint:",this.prFactValueInt),localStorage.setItem("prFactValueInt",this.prFactValueInt.toString())}else console.error("The 12th object is not available in the response")},e=>{console.error("Error fetching correlatives:",e)})}addItemsFromLocalStorage(){let i=JSON.parse(localStorage.getItem("invoiceItems")||"[]").map(l=>this.fb.group({codItem:[l.codigo],codUbic:["01"],codVend:["01"],descrip1:[l.descripcion],priceO:[l.precio],precio:[l.precio],cantidad:[l.cantidad],mtoTax:[l.impuesto]})),n=this.registerForm.get("items");n?i.forEach(l=>n.push(l)):console.error('El control "items" no es un FormArray')}addItemsToDocumentoElectronicoFromLocalStorage(){let i=JSON.parse(localStorage.getItem("invoiceItems")||"[]").map(l=>this.fb.group({numeroLinea:String(l.numeroLinea||"01"),codigoCIIU:String(l.codigoCIIU||"CIIU"),codigoPLU:String(l.codigoPLU||"PLU"),indicadorBienoServicio:l.indicadorBienoServicio||null,descripcion:String(l.descripcion||""),cantidad:String(l.cantidad||"0"),unidadMedida:String(l.unidadMedida||"01"),precioUnitario:String(l.precio||"0"),precioUnitarioDescuento:String(l.precioUnitarioDescuento||"0"),montoBonificacion:String(l.montoBonificacion||"0"),descripcionBonificacion:String(l.descripcionBonificacion||""),descuentoMonto:String(l.descuentoMonto||"0"),precioItem:String(l.precio||"0"),codigoImpuesto:String(l.codigoImpuesto||"E"),tasaIVA:String(l.tasaIVA||"16"),valorIVA:String(l.valorIVA||"0"),valorTotalItem:String(l.precio*l.cantidad||"0"),infoAdicionalItem:[],listaItemOTI:this.fb.array(l.listaItemOTI||[])})),n=this.documentoElectronicoForm.get("documentoElectronico.detallesItems");n?(n.clear(),i.forEach(l=>n.push(l)),console.log("Items actualizados en el formulario de documento electr\xF3nico:",n.value)):console.error('El control "detallesItems" no es un FormArray')}updateForm(e){let i={invoice:{codClie:e.id3||"",codVend:"01",codUbic:"01",descrip:e.descrip||"",direc1:e.direc1||"",direc2:"Maracaibo, Venezuela",mtoTotal:116,tgravable:100,texento:0,monto:100,mtoTax:16,contado:116,tipoCli:e.tipocli||1,fechaE:"2024-02-16 12:00:00.000",fechaV:"2024-02-16 12:00:00.000",Id3:e.id3||"",ordenC:"01",telef:e.telef||"",tipoFac:"A"},items:[{codItem:"01",codUbic:"01",codVend:"01",descrip1:"PUNTO SAINT",priceO:100,precio:100,cantidad:1,mtoTax:16}],payments:[{monto:this.totalBs,codTarj:this.selectedOption||"-EFE-",fechae:"2024-02-06 12:00:00.000",descrip:this.descrip||"Efectivo"}],taxes:[{monto:16,codTaxs:"IVA",tgravable:100}]};this.registerForm.setValue(i);let n=this.registerForm.get("items");n?(n.clear(),[{codItem:"01",codUbic:"01",codVend:"01",descrip1:"PUNTO SAINT",priceO:100,precio:100,cantidad:1,mtoTax:16}].forEach(L=>n.push(this.fb.group(L))),console.log("Items actualizados en el formulario:",n.value)):console.error('El control "items" no es un FormArray'),console.log("factura",this.prFactValueInt);let l={documentoElectronico:{encabezado:{identificacionDocumento:{tipoDocumento:e.tipoDocumento||"01",numeroDocumento:e.numeroDocumento||String(this.prFactValueInt)||"",tipoProveedor:e.tipoProveedor||null,tipoTransaccion:e.tipoTransaccion||"01",numeroPlanillaImportacion:e.numeroPlanillaImportacion||null,numeroExpedienteImportacion:e.numeroExpedienteImportacion||null,serieFacturaAfectada:e.serieFacturaAfectada||null,numeroFacturaAfectada:e.numeroFacturaAfectada||null,fechaFacturaAfectada:e.fechaFacturaAfectada||null,montoFacturaAfectada:e.montoFacturaAfectada||null,comentarioFacturaAfectada:e.comentarioFacturaAfectada||null,regimenEspTributacion:e.regimenEspTributacion||null,fechaEmision:e.fechaEmision||"06/10/2024",fechaVencimiento:e.fechaVencimiento||"06/10/2024",horaEmision:e.horaEmision||"12:00:00 pm",anulado:e.anulado||!1,tipoDePago:String(e.tipoDePago||"Contado"),serie:e.serie||"",sucursal:e.sucursal||"",tipoDeVenta:String(e.tipoDeVenta||"interna"),moneda:e.moneda||"BSD",transaccionId:e.transaccionId||null},vendedor:e.vendedor||null,comprador:{tipoIdentificacion:e.id3?e.id3.charAt(0):"E",numeroIdentificacion:e.id3?e.id3.substring(1):"",razonSocial:e.descrip||"",direccion:e.direc1,ubigeo:e.ubigeo||null,pais:String(e.pais||"1"),notificar:e.notificar||null,telefono:e.telef?[e.telef]:["0414-8007809"],correo:e.correo?[e.correo]:["eiasistemas.desarrollo@gmail.com"],otrosEnvios:e.otrosEnvios||null},sujetoRetenido:e.sujetoRetenido||null,tercero:e.tercero||null,totales:{nroItems:String(localStorage.getItem("invoiceItems").length||"1"),montoGravadoTotal:String(e.montoGravadoTotal||"1"),montoExentoTotal:e.montoExentoTotal||"00.00",subtotal:String(e.subtotal||"1"),totalAPagar:String(e.totalAPagar||"69.60"),totalIVA:String(e.totalIVA||"1"),montoTotalConIVA:String(e.montoTotalConIVA||"69.60"),montoEnLetras:e.montoEnLetras||null,totalDescuento:String(e.totalDescuento||"1"),listaDescBonificacion:e.listaDescBonificacion||[{descDescuento:"00.00",montoDescuento:"1"}],impuestosSubtotal:e.impuestosSubtotal||[{codigoTotalImp:"G",alicuotaImp:"16.00",baseImponibleImp:"100.00",valorTotalImp:"16.00"},{codigoTotalImp:"E",alicuotaImp:"00.00",baseImponibleImp:"0.0",valorTotalImp:"00.00"},{codigoTotalImp:"IGTF",alicuotaImp:"3.00",baseImponibleImp:"116.0",valorTotalImp:"3.48"}],formasPago:e.formasPago||[{descripcion:this.descrip||"Efectivo",fecha:"01/01/2022",forma:"01",monto:"69.60",moneda:this.selectedOption==="USD"?"USD":"BS",tipoCambio:"0"}]},totalesRetencion:e.totalesRetencion||null,totalesOtraMoneda:{moneda:e.monedaOtra||"USD",tipoCambio:e.tipoCambioOtra||"40",montoGravadoTotal:String(e.montoGravadoTotalOtra||"0"),montoExentoTotal:String(e.montoExentoTotalOtra||"0"),subtotal:String(e.subtotalOtra||"0"),totalAPagar:String(e.totalAPagarOtra||"0"),totalIVA:String(e.totalIVAOtra||"0"),montoTotalConIVA:String(e.montoTotalConIVAOtra||"0"),montoEnLetras:e.montoEnLetrasOtra||null,totalDescuento:String(e.totalDescuentoOtra||"0"),listaDescBonificacion:e.listaDescBonificacionOtra||[{descDescuento:"",montoDescuento:"0"}],impuestosSubtotal:e.impuestosSubtotalOtra||[{codigoTotalImp:"IGTF",alicuotaImp:"3.00",baseImponibleImp:"2.00",valorTotalImp:"0.06"}]},orden:e.orden||null},detallesItems:e.detallesItems||[{numeroLinea:"01",codigoCIIU:"CIIU",codigoPLU:"PLU",indicadorBienoServicio:e.indicadorBienoServicio||null,descripcion:"?SEGURO PREPAGADOS",cantidad:"1",unidadMedida:"01",precioUnitario:"0",precioUnitarioDescuento:"0",montoBonificacion:"0",descripcionBonificacion:"",descuentoMonto:"0",precioItem:"0",codigoImpuesto:e.codigoImpuesto||null,tasaIVA:"0.16",valorIVA:"0",valorTotalItem:"0",infoAdicionalItem:e.infoAdicionalItem||[],listaItemOTI:e.listaItemOTI||[]}],detallesRetencion:e.detallesRetencion||null,viajes:e.viajes||null,infoAdicional:e.infoAdicional||[{campo:"PDF",valor:"{'coletilla1':'Este pago estar\xE1 sujeto al cobro adicional del 3,00% del Impuesto a las Grandes Transacciones Financieras (IGTF), de conformidad con la Providencia Administrativa SNAT/2022/000013 publicada en la G.O.N. 42.339 del 17-03-2022, en caso de ser cancelado en divisas. No aplica en pago en Bs.'}"}],guiaDespacho:e.guiaDespacho||null,transporte:e.transporte||null,esLote:e.esLote||null,esMinimo:e.esMinimo||null}};this.documentoElectronicoForm.patchValue(l);let h=this.documentoElectronicoForm.get("documentoElectronico.detallesItems");h&&(h.clear(),l.documentoElectronico.detallesItems.forEach(E=>{h.push(this.fb.group(E))}));let b=this.documentoElectronicoForm.get("documentoElectronico.infoAdicional");b&&(b.clear(),l.documentoElectronico.infoAdicional.forEach(E=>{b.push(this.fb.group(E))})),console.log("Formulario de documento electr\xF3nico actualizado:",this.documentoElectronicoForm.value);let w=this.documentoElectronicoForm.get("documentoElectronico.detallesItems");w?(w.clear(),[{numeroLinea:"",codigoCIIU:"",codigoPLU:"",indicadorBienoServicio:"",descripcion:"",cantidad:0,unidadMedida:"",precioUnitario:0,precioUnitarioDescuento:0,montoBonificacion:0,descripcionBonificacion:"",descuentoMonto:0,precioItem:0,codigoImpuesto:"",tasaIVA:"",valorIVA:0,valorTotalItem:0,infoAdicionalItem:"",listaItemOTI:[]}].forEach(L=>w.push(this.fb.group(L))),console.log("Items actualizados en el formulario de documento electr\xF3nico:",w.value)):console.error('El control "detallesItems" no es un FormArray')}updateDropdownOptions(e){this.selectedOption=e,this.referenceNumber="",this.phoneNumber="",this.idNumber="",this.email="",this.batchNumber="";let i="";switch(e){case"USD":i="USD",this.descrip="Divisas";break;case"-EFE-":i="-EFE-",this.descrip="Efectivo";break;case"0134":i="0134",this.descrip="Banesco";break;case"0134M":i="0134M",this.descrip="Banesco Pago M\xF3vil";break;case"0134P":i="0134P",this.descrip="Banesco POS";break;default:i="";break}}getTotalPayments(){return this.paymentsList.reduce((e,i)=>e+i.monto,0)}getRemainingBalance(){let e=this.itemFactItems.reduce((i,n)=>i+(parseFloat(n.montoneto)||0),0);return this.totalBs-this.getTotalPayments()-e}isFormValid(){return!this.formattedTotalBs||this.formattedTotalBs<=0?!1:this.selectedOption==="0134M"?this.idNumber.trim()!==""&&this.phoneNumber.trim()!==""&&this.getRemainingBalance()===0:this.selectedOption==="0134P"?this.batchNumber.trim()!==""&&this.getRemainingBalance()===0:this.getRemainingBalance()===0}addPayment(){if(!this.formattedTotalBs||isNaN(this.formattedTotalBs)||this.formattedTotalBs<=0){alert("Por favor ingresa un monto v\xE1lido.");return}let e=parseFloat(this.formattedTotalBs.toString()),i=e*.16,n=this.totalUsd;if(this.selectedOption==="0134M"&&(!this.idNumber||!this.idNumber.trim()||!this.phoneNumber||!this.phoneNumber.trim())){this.messageService.add({severity:"error",summary:"Error",detail:"Por favor completa todos los campos requeridos para Pago M\xF3vil."});return}if(this.selectedOption==="0134P"&&(!this.batchNumber||!this.batchNumber.trim())){this.messageService.add({severity:"error",summary:"Error",detail:"Por favor completa todos los campos requeridos para Pago POS."});return}if(this.getTotalPayments()+e>this.totalBs){this.messageService.add({severity:"error",summary:"Error",detail:"La suma de los pagos no puede exceder el total de "+this.totalBs+" Bs."});return}this.paymentsList.push({tipoPago:this.descrip,monto:e,montoDolares:n,igtf:i});let h=this.registerForm.get("payments"),b=this.fb.group({tipoPago:this.selectedOption,monto:e,montoDolares:n,igtf:i,fechae:new Date().toISOString()});h.push(b),this.formattedTotalBs=null,this.idNumber="",this.phoneNumber="",this.batchNumber="",this.cd.detectChanges(),console.log("Valor del formulario completo:",this.documentoElectronicoForm.value)}removePayment(e){this.paymentsList.splice(e,1),this.registerForm.get("payments").removeAt(e)}clearForm(){this.selectedOption="",this.referenceNumber="",this.phoneNumber="",this.idNumber="",this.batchNumber="",this.paymentsList=[];let e=this.registerForm.get("payments");for(;e.length!==0;)e.removeAt(0)}submitForm(){if(this.registerForm){this.isLoading.set(!0),console.log("Contenido del formulario antes de enviar:",this.registerForm.value);let e=this.registerForm.get("payments");if(e.length>0){let i=e.at(0).value;delete i.igtf,e.clear(),e.push(this.fb.group(i))}console.log("Contenido del formulario sin IGTF antes de enviar:",JSON.stringify(this.registerForm.value)),this.registerInvoiceService.submitInvoice(this.registerForm).subscribe(i=>{this.messageService.add({severity:"success",summary:"\xC9xito",detail:"Formulario enviado exitosamente"});let n=this.removeCircularReferences(this.documentoElectronicoForm.value);console.log("Contenido del formulario limpio:",JSON.stringify(n)),this.theFactoryService.submitInvoice(this.documentoElectronicoForm).subscribe(h=>{console.log("Respuesta del servicio de The Factory:",h),this.messageService.add({severity:"success",summary:"\xC9xito",detail:"Factura generada exitosamente"}),this.isLoading.set(!1)},h=>{console.error("Error al enviar el formulario a The Factory:",h),this.messageService.add({severity:"error",summary:"Error",detail:"Hubo un error al enviar el formulario a The Factory. Por favor, int\xE9ntalo de nuevo."}),this.isLoading.set(!1)}),localStorage.getItem("seleectedCxcId")&&this.invoiceFormService.updateCxcSaldoToZero().subscribe(h=>{console.log("Saldo de la CXC actualizado a 0:",h),this.messageService.add({severity:"success",summary:"\xC9xito",detail:"Saldo de la CXC actualizado a 0"}),localStorage.removeItem("itemFact")},h=>{console.error("Error al actualizar el saldo de la CXC:",h),this.messageService.add({severity:"error",summary:"Error",detail:"Hubo un error al actualizar el saldo de la CXC"}),this.isLoading.set(!1),window.location.reload()})},i=>{console.error("Error al enviar el formulario:",i),this.messageService.add({severity:"error",summary:"Error",detail:"Hubo un error al enviar el formulario. Por favor, int\xE9ntalo de nuevo."}),this.isLoading.set(!1)})}else console.error("El formulario no est\xE1 inicializado.")}onDropdownChange(e){this.selectedOption=e.value}removeCircularReferences(e){let i=new WeakSet;return JSON.parse(JSON.stringify(e,(n,l)=>{if(typeof l=="object"&&l!==null){if(i.has(l))return;i.add(l)}return l}))}};r.\u0275fac=function(i){return new(i||r)(C(yt),C(Kt),C(He),C(re),C(Fe),C(Te),C(It),C(J),C(Ke),C(Re),C(Gt))},r.\u0275cmp=V({type:r,selectors:[["app-payment-modal"]],decls:49,vars:20,consts:[[1,"container"],[1,"saldo"],[1,"title"],[1,"total"],[1,"pay-method"],["for","paymentMethod",1,"title"],["id","paymentMethod",3,"ngModelChange","onChange","ngModel"],["value",""],["value","USD"],["value","-EFE-"],["value","0134"],["value","0134M"],["value","0134P"],[1,"value"],["for","amount",1,"title"],["id","amount","type","number","pInputText","",3,"ngModelChange","ngModel"],["class","conditional-inputs",4,"ngIf"],[1,"btns"],["pButton","","type","button","label","Agregar Pago",1,"p-button-primary",3,"click","disabled"],["pButton","","type","button","label","Procesar Factura",1,"p-button-success",3,"click","disabled"],["pButton","","type","button","label","Limpiar",1,"p-button-danger",3,"click"],[1,"combined-container"],[1,"pending"],[1,"payments","items-table-container"],[1,"items-table"],[4,"ngFor","ngForOf"],[1,"conditional-inputs"],["for","idNumber"],["id","idNumber","type","text","pInputText","","required","",3,"ngModelChange","ngModel"],["for","phoneNumber"],["id","phoneNumber","type","text","pInputText","","required","",3,"ngModelChange","ngModel"],["for","email"],["id","email","type","text","pInputText","","required","",3,"ngModelChange","ngModel"],["for","batchNumber"],["id","batchNumber","type","text","pInputText","","required","",3,"ngModelChange","ngModel"],["pButton","","type","button","icon","pi pi-trash",1,"p-button-danger",3,"click"]],template:function(i,n){i&1&&(a(0,"div",0)(1,"div",1)(2,"label",2),d(3,"Saldo Pendiente:"),s(),a(4,"div")(5,"label",3),d(6),W(7,"number"),W(8,"number"),s()()(),a(9,"div",4)(10,"label",5),d(11,"Tipo de pago:"),s(),a(12,"select",6),q("ngModelChange",function(h){return G(n.selectedOption,h)||(n.selectedOption=h),h}),x("ngModelChange",function(h){return n.updateDropdownOptions(h)})("onChange",function(h){return n.onDropdownChange(h)}),a(13,"option",7),d(14,"Seleccionar forma de pago:"),s(),a(15,"option",8),d(16,"Divisa"),s(),a(17,"option",9),d(18,"Efectivo"),s(),a(19,"option",10),d(20,"Banesco"),s(),a(21,"option",11),d(22,"Banco de Venezuela Pago Movil"),s(),a(23,"option",12),d(24,"Banesco POS"),s()()(),a(25,"div",13)(26,"label",14),d(27,"Monto: "),s(),a(28,"input",15),q("ngModelChange",function(h){return G(n.formattedTotalBs,h)||(n.formattedTotalBs=h),h}),s(),_(29,gi,10,3,"div",16)(30,fi,4,1,"div",16),a(31,"div",17)(32,"button",18),x("click",function(){return n.addPayment()}),s(),a(33,"button",19),x("click",function(){return n.submitForm()}),s(),a(34,"button",20),x("click",function(){return n.clearForm()}),s()(),a(35,"div",21)(36,"label",2),d(37,"Pagos Realizados:"),s(),a(38,"div",22)(39,"label"),d(40,"Saldo restante: "),a(41,"span"),d(42),W(43,"number"),s()()()(),a(44,"div",23)(45,"div",24)(46,"table")(47,"tbody"),_(48,_i,14,13,"tr",25),s()()()()()()),i&2&&(c(6),pe("Bs. ",Q(7,11,n.totalBs,"1.2-2")," / $",Q(8,14,n.totalUsd,"1.2-2"),""),c(6),K("ngModel",n.selectedOption),c(16),K("ngModel",n.formattedTotalBs),c(),u("ngIf",n.selectedOption==="0134M"),c(),u("ngIf",n.selectedOption==="0134P"),c(2),u("disabled",!n.selectedOption)("disabled",!n.isFormValid()),c(),u("disabled",n.getRemainingBalance()!==0),c(9),O("Bs. ",Q(43,17,n.getRemainingBalance(),"1.2-2"),""),c(6),u("ngForOf",n.paymentsList))},dependencies:[ne,oe,Ue,ze,kt,At,Le,Pt,Vt,Be,Dt,Tt,Oe],styles:['@charset "UTF-8";.pay-method[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.value[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-top:10px}.value[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:5px;border:1px solid #ccc;border-radius:4px}.btns[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.saldo[_ngcontent-%COMP%]{display:flex;flex-direction:column}.saldo[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px;margin-bottom:10px}.title[_ngcontent-%COMP%]{font-weight:700}.total[_ngcontent-%COMP%]{color:red;font-weight:700}.conditional-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-top:10px}.conditional-inputs[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.conditional-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:5px;border:1px solid #ccc;border-radius:4px}select[_ngcontent-%COMP%]{height:4vh;border-radius:4px;border:1px solid #ccc;padding:5px;width:100%;box-sizing:border-box}select[_ngcontent-%COMP%]:focus{border-color:#007ad9;outline:none;box-shadow:0 0 0 .2rem #007ad940}.combined-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:150px}.pending[_ngcontent-%COMP%]{flex:1}.pending[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.pending[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}.payments[_ngcontent-%COMP%]{flex:1}.payments[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:block;margin-bottom:10px}table[_ngcontent-%COMP%]{width:100%}.items-table-container[_ngcontent-%COMP%]{max-height:180px;overflow-y:auto;margin-top:16px;display:block}.items-table[_ngcontent-%COMP%]{display:block}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;display:table;margin-bottom:20px}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:right;vertical-align:middle;display:table-cell}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#00f;color:#fff;font-weight:700;text-align:center;vertical-align:middle;display:table-cell}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table-header-group}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:table-row-group}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table-row}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}']});let o=r;return o})();var Wt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=V({type:r,selectors:[["app-credit-note"]],decls:5,vars:0,consts:[[1,"container"],["type","text","placeholder","Nro Factura",1,"custom-input","mb-2"],[1,"p-button","p-component"],[1,"p-button-label"]],template:function(i,n){i&1&&(a(0,"div",0),I(1,"input",1),a(2,"button",2)(3,"span",3),d(4,"Buscar"),s()()())},styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.p-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:middle;text-align:center;overflow:hidden;position:relative;height:2.5em;padding:0 1em;font-size:1rem;border-radius:3px;border:1px solid transparent;background-color:var(--primary-color, #007ad9);color:#fff;transition:background-color .2s,border-color .2s,color .2s;width:20%}.p-button[_ngcontent-%COMP%]:hover{background-color:var(--primary-color-hover, #005bb5)}.p-button[_ngcontent-%COMP%]:focus{outline:0;box-shadow:0 0 0 .2rem #007bff40}.p-button-label[_ngcontent-%COMP%]{display:inline-block;line-height:1}.p-component[_ngcontent-%COMP%]{box-sizing:border-box}.custom-input[_ngcontent-%COMP%]{display:block;width:100%;padding:.5em;font-size:1rem;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;border-radius:3px;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.custom-input[_ngcontent-%COMP%]:focus{border-color:#007ad9;outline:none;box-shadow:0 0 0 .2rem #007ad940}.custom-input[_ngcontent-%COMP%]::placeholder{color:#6c757d;opacity:1}']});let o=r;return o})();var Qt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=V({type:r,selectors:[["app-suspend-service-user"]],decls:12,vars:0,consts:[[1,"container"],[1,"inicial-date"],["for",""],["type","text",1,"custom-input","mb-2"],[1,"final-date"],[1,"p-button","p-component"],[1,"p-button-label"]],template:function(i,n){i&1&&(a(0,"div",0)(1,"div",1)(2,"label",2),d(3,"Fecha de inicio:"),s(),I(4,"input",3),s(),a(5,"div",4)(6,"label",2),d(7,"Fecha de fin:"),s(),I(8,"input",3),s(),a(9,"button",5)(10,"span",6),d(11,"Buscar"),s()()())},styles:['@charset "UTF-8";.container[_ngcontent-%COMP%], .inicial-date[_ngcontent-%COMP%], .final-date[_ngcontent-%COMP%]{display:flex;flex-direction:column}.p-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:middle;text-align:center;overflow:hidden;position:relative;height:2.5em;padding:0 1em;font-size:1rem;border-radius:3px;border:1px solid transparent;background-color:var(--primary-color, #007ad9);color:#fff;transition:background-color .2s,border-color .2s,color .2s;width:20%}.p-button[_ngcontent-%COMP%]:hover{background-color:var(--primary-color-hover, #005bb5)}.p-button[_ngcontent-%COMP%]:focus{outline:0;box-shadow:0 0 0 .2rem #007bff40}.p-button-label[_ngcontent-%COMP%]{display:inline-block;line-height:1}.p-component[_ngcontent-%COMP%]{box-sizing:border-box}.custom-input[_ngcontent-%COMP%]{display:block;width:100%;padding:.5em;font-size:1rem;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;border-radius:3px;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.custom-input[_ngcontent-%COMP%]:focus{border-color:#007ad9;outline:none;box-shadow:0 0 0 .2rem #007ad940}.custom-input[_ngcontent-%COMP%]::placeholder{color:#6c757d;opacity:1}']});let o=r;return o})();var bi=["*"],Zt=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=V({type:o,selectors:[["p-floatLabel"]],ngContentSelectors:bi,decls:2,vars:0,consts:[[1,"p-float-label"]],template:function(e,i){e&1&&(be(),a(0,"span",0),Ce(1),s())},encapsulation:2,changeDetection:0})}return o})(),Jt=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=z({type:o});static \u0275inj=B({imports:[X,Z,de,Z]})}return o})();var vi=["container"],yi=["focusInput"],Ii=["multiIn"],wi=["multiContainer"],Oi=["ddBtn"],Si=["items"],Ti=["scroller"],Mi=["overlay"],Pi=o=>({"p-autocomplete-token":!0,"p-focus":o}),Xt=o=>({$implicit:o}),Ge=o=>({height:o}),Yt=(o,r)=>({$implicit:o,options:r}),Ei=o=>({options:o}),Fi=()=>({}),Vi=(o,r,t)=>({"p-highlight":o,"p-focus":r,"p-disabled":t}),ki=(o,r)=>({$implicit:o,index:r});function Ai(o,r){if(o&1){let t=S();a(0,"input",20,3),x("input",function(i){g(t);let n=m();return f(n.onInput(i))})("keydown",function(i){g(t);let n=m();return f(n.onKeyDown(i))})("change",function(i){g(t);let n=m();return f(n.onInputChange(i))})("focus",function(i){g(t);let n=m();return f(n.onInputFocus(i))})("blur",function(i){g(t);let n=m();return f(n.onInputBlur(i))})("paste",function(i){g(t);let n=m();return f(n.onInputPaste(i))})("keyup",function(i){g(t);let n=m();return f(n.onInputKeyUp(i))}),s()}if(o&2){let t,e=m();te(e.inputStyleClass),u("autofocus",e.autofocus)("ngClass",e.inputClass)("ngStyle",e.inputStyle)("type",e.type)("autocomplete",e.autocomplete)("required",e.required)("name",e.name)("tabindex",e.disabled?-1:e.tabindex)("readonly",e.readonly)("disabled",e.disabled),M("value",e.inputValue())("id",e.inputId)("placeholder",e.placeholder)("size",e.size)("maxlength",e.maxlength)("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy)("aria-required",e.required)("aria-expanded",(t=e.overlayVisible)!==null&&t!==void 0?t:!1)("aria-controls",e.overlayVisible?e.id+"_list":null)("aria-activedescendant",e.focused?e.focusedOptionId:void 0)}}function Di(o,r){if(o&1){let t=S();a(0,"TimesIcon",23),x("click",function(){g(t);let i=m(2);return f(i.clear())}),s()}o&2&&(u("styleClass","p-autocomplete-clear-icon"),M("aria-hidden",!0))}function Li(o,r){}function Bi(o,r){o&1&&_(0,Li,0,0,"ng-template")}function zi(o,r){if(o&1){let t=S();a(0,"span",24),x("click",function(){g(t);let i=m(2);return f(i.clear())}),_(1,Bi,1,0,null,17),s()}if(o&2){let t=m(2);M("aria-hidden",!0),c(),u("ngTemplateOutlet",t.clearIconTemplate)}}function Ni(o,r){if(o&1&&(j(0),_(1,Di,1,2,"TimesIcon",21)(2,zi,2,2,"span",22),R()),o&2){let t=m();c(),u("ngIf",!t.clearIconTemplate),c(),u("ngIf",t.clearIconTemplate)}}function Ui(o,r){o&1&&k(0)}function ji(o,r){if(o&1&&(a(0,"span",35),d(1),s()),o&2){let t=m().$implicit,e=m(2);c(),v(e.getMultipleLabel(t))}}function Ri(o,r){o&1&&I(0,"TimesCircleIcon",36),o&2&&(u("styleClass","p-autocomplete-token-icon"),M("aria-hidden",!0))}function Hi(o,r){}function Ki(o,r){o&1&&_(0,Hi,0,0,"ng-template")}function Gi(o,r){if(o&1&&(a(0,"span",37),_(1,Ki,1,0,null,17),s()),o&2){let t=m(3);M("aria-hidden",!0),c(),u("ngTemplateOutlet",t.removeIconTemplate)}}function qi(o,r){if(o&1){let t=S();a(0,"li",29,5),_(2,Ui,1,0,"ng-container",30)(3,ji,2,1,"span",31),a(4,"span",32),x("click",function(i){let n=g(t).index,l=m(2);return f(l.readonly?"":l.removeOption(i,n))}),_(5,Ri,1,2,"TimesCircleIcon",33)(6,Gi,2,2,"span",34),s()()}if(o&2){let t=r.$implicit,e=r.index,i=m(2);u("ngClass",$(11,Pi,i.focusedMultipleOptionIndex()===e)),M("id",i.id+"_multiple_option_"+e)("aria-label",i.getOptionLabel(t))("aria-setsize",i.modelValue().length)("aria-posinset",e+1)("aria-selected",!0),c(2),u("ngTemplateOutlet",i.selectedItemTemplate)("ngTemplateOutletContext",$(13,Xt,t)),c(),u("ngIf",!i.selectedItemTemplate),c(2),u("ngIf",!i.removeIconTemplate),c(),u("ngIf",i.removeIconTemplate)}}function $i(o,r){if(o&1){let t=S();a(0,"ul",25,4),x("focus",function(i){g(t);let n=m();return f(n.onMultipleContainerFocus(i))})("blur",function(i){g(t);let n=m();return f(n.onMultipleContainerBlur(i))})("keydown",function(i){g(t);let n=m();return f(n.onMultipleContainerKeyDown(i))}),_(2,qi,7,15,"li",26),a(3,"li",27)(4,"input",28,3),x("input",function(i){g(t);let n=m();return f(n.onInput(i))})("keydown",function(i){g(t);let n=m();return f(n.onKeyDown(i))})("change",function(i){g(t);let n=m();return f(n.onInputChange(i))})("focus",function(i){g(t);let n=m();return f(n.onInputFocus(i))})("blur",function(i){g(t);let n=m();return f(n.onInputBlur(i))})("paste",function(i){g(t);let n=m();return f(n.onInputPaste(i))})("keyup",function(i){g(t);let n=m();return f(n.onInputKeyUp(i))}),s()()()}if(o&2){let t,e=m();u("ngClass",e.multiContainerClass)("tabindex",-1),M("aria-orientation","horizontal")("aria-activedescendant",e.focused?e.focusedMultipleOptionId:void 0),c(2),u("ngForOf",e.modelValue()),c(2),te(e.inputStyleClass),u("autofocus",e.autofocus)("ngClass",e.inputClass)("ngStyle",e.inputStyle)("autocomplete",e.autocomplete)("required",e.required)("tabindex",e.disabled?-1:e.tabindex)("readonly",e.readonly)("disabled",e.disabled),M("type",e.type)("id",e.inputId)("name",e.name)("placeholder",e.filled?null:e.placeholder)("size",e.size)("maxlength",e.maxlength)("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy)("aria-required",e.required)("aria-expanded",(t=e.overlayVisible)!==null&&t!==void 0?t:!1)("aria-controls",e.overlayVisible?e.id+"_list":null)("aria-activedescendant",e.focused?e.focusedOptionId:void 0)}}function Wi(o,r){o&1&&I(0,"SpinnerIcon",40),o&2&&(u("styleClass","p-autocomplete-loader")("spin",!0),M("aria-hidden",!0))}function Qi(o,r){}function Zi(o,r){o&1&&_(0,Qi,0,0,"ng-template")}function Ji(o,r){if(o&1&&(a(0,"span",41),_(1,Zi,1,0,null,17),s()),o&2){let t=m(2);M("aria-hidden",!0),c(),u("ngTemplateOutlet",t.loadingIconTemplate)}}function Xi(o,r){if(o&1&&(j(0),_(1,Wi,1,3,"SpinnerIcon",38)(2,Ji,2,2,"span",39),R()),o&2){let t=m();c(),u("ngIf",!t.loadingIconTemplate),c(),u("ngIf",t.loadingIconTemplate)}}function Yi(o,r){if(o&1&&I(0,"span",44),o&2){let t=m(2);u("ngClass",t.dropdownIcon),M("aria-hidden",!0)}}function en(o,r){o&1&&I(0,"ChevronDownIcon")}function tn(o,r){}function nn(o,r){o&1&&_(0,tn,0,0,"ng-template")}function on(o,r){if(o&1&&(j(0),_(1,en,1,0,"ChevronDownIcon",12)(2,nn,1,0,null,17),R()),o&2){let t=m(2);c(),u("ngIf",!t.dropdownIconTemplate),c(),u("ngTemplateOutlet",t.dropdownIconTemplate)}}function an(o,r){if(o&1){let t=S();a(0,"button",42,6),x("click",function(i){g(t);let n=m();return f(n.handleDropdownClick(i))}),_(2,Yi,1,2,"span",43)(3,on,3,2,"ng-container",12),s()}if(o&2){let t=m();u("disabled",t.disabled),M("aria-label",t.dropdownAriaLabel)("tabindex",t.tabindex),c(2),u("ngIf",t.dropdownIcon),c(),u("ngIf",!t.dropdownIcon)}}function rn(o,r){o&1&&k(0)}function ln(o,r){o&1&&k(0)}function sn(o,r){if(o&1&&_(0,ln,1,0,"ng-container",30),o&2){let t=r.$implicit,e=r.options;m(2);let i=ce(14);u("ngTemplateOutlet",i)("ngTemplateOutletContext",ie(2,Yt,t,e))}}function cn(o,r){o&1&&k(0)}function pn(o,r){if(o&1&&_(0,cn,1,0,"ng-container",30),o&2){let t=r.options,e=m(3);u("ngTemplateOutlet",e.loaderTemplate)("ngTemplateOutletContext",$(2,Ei,t))}}function dn(o,r){o&1&&(j(0),_(1,pn,1,4,"ng-template",47),R())}function mn(o,r){if(o&1){let t=S();a(0,"p-scroller",45,7),x("onLazyLoad",function(i){g(t);let n=m();return f(n.onLazyLoad.emit(i))}),_(2,sn,1,5,"ng-template",46)(3,dn,2,0,"ng-container",12),s()}if(o&2){let t=m();$e($(8,Ge,t.scrollHeight)),u("items",t.visibleOptions())("itemSize",t.virtualScrollItemSize||t._itemSize)("autoSize",!0)("lazy",t.lazy)("options",t.virtualScrollOptions),c(3),u("ngIf",t.loaderTemplate)}}function un(o,r){o&1&&k(0)}function hn(o,r){if(o&1&&(j(0),_(1,un,1,0,"ng-container",30),R()),o&2){let t=m(),e=ce(14);c(),u("ngTemplateOutlet",e)("ngTemplateOutletContext",ie(3,Yt,t.visibleOptions(),mt(2,Fi)))}}function gn(o,r){if(o&1&&(a(0,"span"),d(1),s()),o&2){let t=m(2).$implicit,e=m(2);c(),v(e.getOptionGroupLabel(t.optionGroup))}}function fn(o,r){o&1&&k(0)}function _n(o,r){if(o&1&&(j(0),a(1,"li",51),_(2,gn,2,1,"span",12)(3,fn,1,0,"ng-container",30),s(),R()),o&2){let t=m(),e=t.$implicit,i=t.index,n=m().options,l=m();c(),u("ngStyle",$(5,Ge,n.itemSize+"px")),M("id",l.id+"_"+l.getOptionIndex(i,n)),c(),u("ngIf",!l.groupTemplate),c(),u("ngTemplateOutlet",l.groupTemplate)("ngTemplateOutletContext",$(7,Xt,e.optionGroup))}}function bn(o,r){if(o&1&&(a(0,"span"),d(1),s()),o&2){let t=m(2).$implicit,e=m(2);c(),v(e.getOptionLabel(t))}}function Cn(o,r){o&1&&k(0)}function xn(o,r){if(o&1){let t=S();j(0),a(1,"li",52),x("click",function(i){g(t);let n=m().$implicit,l=m(2);return f(l.onOptionSelect(i,n))})("mouseenter",function(i){g(t);let n=m().index,l=m().options,h=m();return f(h.onOptionMouseEnter(i,h.getOptionIndex(n,l)))}),_(2,bn,2,1,"span",12)(3,Cn,1,0,"ng-container",30),s(),R()}if(o&2){let t=m(),e=t.$implicit,i=t.index,n=m().options,l=m();c(),u("ngStyle",$(12,Ge,n.itemSize+"px"))("ngClass",ut(14,Vi,l.isSelected(e),l.focusedOptionIndex()===l.getOptionIndex(i,n),l.isOptionDisabled(e))),M("id",l.id+"_"+l.getOptionIndex(i,n))("aria-label",l.getOptionLabel(e))("aria-selected",l.isSelected(e))("aria-disabled",l.isOptionDisabled(e))("data-p-focused",l.focusedOptionIndex()===l.getOptionIndex(i,n))("aria-setsize",l.ariaSetSize)("aria-posinset",l.getAriaPosInset(l.getOptionIndex(i,n))),c(),u("ngIf",!l.itemTemplate),c(),u("ngTemplateOutlet",l.itemTemplate)("ngTemplateOutletContext",ie(18,ki,e,n.getOptions?n.getOptions(i):i))}}function vn(o,r){if(o&1&&_(0,_n,4,9,"ng-container",12)(1,xn,4,21,"ng-container",12),o&2){let t=r.$implicit,e=m(2);u("ngIf",e.isOptionGroup(t)),c(),u("ngIf",!e.isOptionGroup(t))}}function yn(o,r){if(o&1&&(j(0),d(1),R()),o&2){let t=m(3);c(),O(" ",t.searchResultMessageText," ")}}function In(o,r){o&1&&k(0,null,9)}function wn(o,r){if(o&1&&(a(0,"li",53),_(1,yn,2,1,"ng-container",54)(2,In,2,0,"ng-container",17),s()),o&2){let t=m().options,e=m();u("ngStyle",$(4,Ge,t.itemSize+"px")),c(),u("ngIf",!e.emptyTemplate)("ngIfElse",e.empty),c(),u("ngTemplateOutlet",e.emptyTemplate)}}function On(o,r){if(o&1&&(a(0,"ul",48,8),_(2,vn,2,2,"ng-template",49)(3,wn,3,6,"li",50),s()),o&2){let t=r.$implicit,e=r.options,i=m();$e(e.contentStyle),u("ngClass",e.contentStyleClass),M("id",i.id+"_list")("aria-label",i.listLabel),c(2),u("ngForOf",t),c(),u("ngIf",!t||t&&t.length===0&&i.showEmptyMessage)}}function Sn(o,r){o&1&&k(0)}var Tn={provide:Ot,useExisting:lt(()=>rt),multi:!0},rt=(()=>{class o{document;el;renderer;cd;config;overlayService;zone;minLength=1;delay=300;style;panelStyle;styleClass;panelStyleClass;inputStyle;inputId;inputStyleClass;placeholder;readonly;disabled;scrollHeight="200px";lazy=!1;virtualScroll;virtualScrollItemSize;virtualScrollOptions;maxlength;name;required;size;appendTo;autoHighlight;forceSelection;type="text";autoZIndex=!0;baseZIndex=0;ariaLabel;dropdownAriaLabel;ariaLabelledBy;dropdownIcon;unique=!0;group;completeOnFocus=!1;showClear=!1;field;dropdown;showEmptyMessage=!0;dropdownMode="blank";multiple;tabindex;dataKey;emptyMessage;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";autofocus;autocomplete="off";optionGroupChildren="items";optionGroupLabel="label";overlayOptions;get suggestions(){return this._suggestions()}set suggestions(t){this._suggestions.set(t),this.handleSuggestionsChange()}get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=t,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}optionLabel;optionValue;id;searchMessage;emptySelectionMessage;selectionMessage;autoOptionFocus=!1;selectOnFocus;searchLocale;optionDisabled;focusOnHover;variant="outlined";completeMethod=new F;onSelect=new F;onUnselect=new F;onFocus=new F;onBlur=new F;onDropdownClick=new F;onClear=new F;onKeyUp=new F;onShow=new F;onHide=new F;onLazyLoad=new F;containerEL;inputEL;multiInputEl;multiContainerEL;dropdownButton;itemsViewChild;scroller;overlayViewChild;templates;_itemSize;itemsWrapper;itemTemplate;emptyTemplate;headerTemplate;footerTemplate;selectedItemTemplate;groupTemplate;loaderTemplate;removeIconTemplate;loadingIconTemplate;clearIconTemplate;dropdownIconTemplate;value;_suggestions=ee(null);onModelChange=()=>{};onModelTouched=()=>{};timeout;overlayVisible;suggestionsUpdated;highlightOption;highlightOptionChanged;focused=!1;_filled;get filled(){return this._filled}set filled(t){this._filled=t}loading;scrollHandler;listId;searchTimeout;dirty=!1;modelValue=ee(null);focusedMultipleOptionIndex=ee(-1);focusedOptionIndex=ee(-1);visibleOptions=We(()=>this.group?this.flatOptions(this._suggestions()):this._suggestions()||[]);inputValue=We(()=>{let t=this.modelValue(),e=this.getSelectedOption(t);if(t)if(typeof t=="object"||this.optionValue){let i=this.getOptionLabel(e);return i??t}else return t;else return""});get focusedMultipleOptionId(){return this.focusedMultipleOptionIndex()!==-1?`${this.id}_multiple_option_${this.focusedMultipleOptionIndex()}`:null}get focusedOptionId(){return this.focusedOptionIndex()!==-1?`${this.id}_${this.focusedOptionIndex()}`:null}get containerClass(){return{"p-autocomplete p-component p-inputwrapper":!0,"p-disabled":this.disabled,"p-focus":this.focused,"p-autocomplete-dd":this.dropdown,"p-autocomplete-multiple":this.multiple,"p-inputwrapper-focus":this.focused,"p-overlay-open":this.overlayVisible}}get multiContainerClass(){return{"p-autocomplete-multiple-container p-component p-inputtext":!0,"p-variant-filled":this.variant==="filled"||this.config.inputStyle()==="filled"}}get panelClass(){return{"p-autocomplete-panel p-component":!0,"p-input-filled":this.config.inputStyle()==="filled","p-ripple-disabled":this.config.ripple===!1}}get panelStyles(){return le({"max-height":this.virtualScroll?"auto":this.scrollHeight},this.panelStyle)}get inputClass(){return{"p-autocomplete-input p-inputtext p-component":!this.multiple,"p-autocomplete-dd-input":this.dropdown,"p-variant-filled":this.variant==="filled"||this.config.inputStyle()==="filled"}}get searchResultMessageText(){return P.isNotEmpty(this.visibleOptions())&&this.overlayVisible?this.searchMessageText.replaceAll("{0}",this.visibleOptions().length):this.emptySearchMessageText}get searchMessageText(){return this.searchMessage||this.config.translation.searchMessage||""}get emptySearchMessageText(){return this.emptyMessage||this.config.translation.emptySearchMessage||""}get selectionMessageText(){return this.selectionMessage||this.config.translation.selectionMessage||""}get emptySelectionMessageText(){return this.emptySelectionMessage||this.config.translation.emptySelectionMessage||""}get selectedMessageText(){return this.hasSelectedOption()?this.selectionMessageText.replaceAll("{0}",this.multiple?this.modelValue().length:"1"):this.emptySelectionMessageText}get ariaSetSize(){return this.visibleOptions().filter(t=>!this.isOptionGroup(t)).length}get listLabel(){return this.config.getTranslation(xt.ARIA).listLabel}get virtualScrollerDisabled(){return!this.virtualScroll}get optionValueSelected(){return typeof this.modelValue()=="string"&&this.optionValue}constructor(t,e,i,n,l,h,b){this.document=t,this.el=e,this.renderer=i,this.cd=n,this.config=l,this.overlayService=h,this.zone=b,gt(()=>{this.filled=P.isNotEmpty(this.modelValue())})}ngOnInit(){this.id=this.id||Ct(),this.cd.detectChanges()}ngAfterViewChecked(){this.suggestionsUpdated&&this.overlayViewChild&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1),this.suggestionsUpdated=!1})}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"item":this.itemTemplate=t.template;break;case"group":this.groupTemplate=t.template;break;case"selectedItem":this.selectedItemTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"empty":this.emptyTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"loader":this.loaderTemplate=t.template;break;case"removetokenicon":this.removeIconTemplate=t.template;break;case"loadingicon":this.loadingIconTemplate=t.template;break;case"clearicon":this.clearIconTemplate=t.template;break;case"dropdownicon":this.dropdownIconTemplate=t.template;break;default:this.itemTemplate=t.template;break}})}handleSuggestionsChange(){if(this.loading){this._suggestions().length>0||this.showEmptyMessage?this.show():this.emptyTemplate?this.show():this.hide();let t=this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(t),this.suggestionsUpdated=!0,this.loading=!1,this.cd.markForCheck()}}flatOptions(t){return(t||[]).reduce((e,i,n)=>{e.push({optionGroup:i,group:!0,index:n});let l=this.getOptionGroupChildren(i);return l&&l.forEach(h=>e.push(h)),e},[])}isOptionGroup(t){return this.optionGroupLabel&&t.optionGroup&&t.group}findFirstOptionIndex(){return this.visibleOptions().findIndex(t=>this.isValidOption(t))}findLastOptionIndex(){return P.findLastIndex(this.visibleOptions(),t=>this.isValidOption(t))}findFirstFocusedOptionIndex(){let t=this.findSelectedOptionIndex();return t<0?this.findFirstOptionIndex():t}findLastFocusedOptionIndex(){let t=this.findSelectedOptionIndex();return t<0?this.findLastOptionIndex():t}findSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(t=>this.isValidSelectedOption(t)):-1}findNextOptionIndex(t){let e=t<this.visibleOptions().length-1?this.visibleOptions().slice(t+1).findIndex(i=>this.isValidOption(i)):-1;return e>-1?e+t+1:t}findPrevOptionIndex(t){let e=t>0?P.findLastIndex(this.visibleOptions().slice(0,t),i=>this.isValidOption(i)):-1;return e>-1?e:t}isValidSelectedOption(t){return this.isValidOption(t)&&this.isSelected(t)}isValidOption(t){return t&&!(this.isOptionDisabled(t)||this.isOptionGroup(t))}isOptionDisabled(t){return this.optionDisabled?P.resolveFieldData(t,this.optionDisabled):!1}isSelected(t){return this.multiple?this.unique?this.modelValue()?.find(e=>P.equals(e,this.getOptionValue(t),this.equalityKey())):!1:P.equals(this.modelValue(),this.getOptionValue(t),this.equalityKey())}isOptionMatched(t,e){return this.isValidOption(t)&&this.getOptionLabel(t).toLocaleLowerCase(this.searchLocale)===e.toLocaleLowerCase(this.searchLocale)}isInputClicked(t){return t.target===this.inputEL.nativeElement}isDropdownClicked(t){return this.dropdownButton?.nativeElement?t.target===this.dropdownButton.nativeElement||this.dropdownButton.nativeElement.contains(t.target):!1}equalityKey(){return this.dataKey}onContainerClick(t){this.disabled||this.loading||this.isInputClicked(t)||this.isDropdownClicked(t)||(!this.overlayViewChild||!this.overlayViewChild.overlayViewChild?.nativeElement.contains(t.target))&&T.focus(this.inputEL.nativeElement)}handleDropdownClick(t){let e;this.overlayVisible?this.hide(!0):(T.focus(this.inputEL.nativeElement),e=this.inputEL.nativeElement.value,this.dropdownMode==="blank"?this.search(t,"","dropdown"):this.dropdownMode==="current"&&this.search(t,e,"dropdown")),this.onDropdownClick.emit({originalEvent:t,query:e})}onInput(t){this.searchTimeout&&clearTimeout(this.searchTimeout);let e=t.target.value;this.maxlength!==null&&(e=e.split("").slice(0,this.maxlength).join("")),!this.multiple&&!this.forceSelection&&this.updateModel(e),e.length===0&&!this.multiple&&!this.completeOnFocus?(this.onClear.emit(),this.hide()):e.length>=this.minLength?(this.focusedOptionIndex.set(-1),this.searchTimeout=setTimeout(()=>{this.search(t,e,"input")},this.delay)):this.hide()}onInputChange(t){if(this.forceSelection){let e=!1;if(this.visibleOptions()){let i=this.visibleOptions().find(n=>this.isOptionMatched(n,this.inputEL.nativeElement.value||""));i!==void 0&&(e=!0,!this.isSelected(i)&&this.onOptionSelect(t,i))}e||(this.inputEL.nativeElement.value="",!this.multiple&&this.updateModel(null))}}onInputFocus(t){if(this.disabled)return;!this.dirty&&this.completeOnFocus&&(this.search(t,t.target.value,"focus"),this.show()),this.dirty=!0,this.focused=!0;let e=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(e),this.overlayVisible&&this.scrollInView(this.focusedOptionIndex()),this.onFocus.emit(t)}onMultipleContainerFocus(t){this.disabled||(this.focused=!0)}onMultipleContainerBlur(t){this.focusedMultipleOptionIndex.set(-1),this.focused=!1}onMultipleContainerKeyDown(t){if(this.disabled){t.preventDefault();return}switch(t.code){case"ArrowLeft":this.onArrowLeftKeyOnMultiple(t);break;case"ArrowRight":this.onArrowRightKeyOnMultiple(t);break;case"Backspace":this.onBackspaceKeyOnMultiple(t);break;default:break}}onInputBlur(t){this.dirty=!1,this.focused=!1,this.focusedOptionIndex.set(-1),this.onModelTouched(),this.onBlur.emit(t)}onInputPaste(t){this.onKeyDown(t)}onInputKeyUp(t){this.onKeyUp.emit(t)}onKeyDown(t){if(this.disabled){t.preventDefault();return}switch(t.code){case"ArrowDown":this.onArrowDownKey(t);break;case"ArrowUp":this.onArrowUpKey(t);break;case"ArrowLeft":this.onArrowLeftKey(t);break;case"ArrowRight":this.onArrowRightKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"PageDown":this.onPageDownKey(t);break;case"PageUp":this.onPageUpKey(t);break;case"Enter":case"NumpadEnter":this.onEnterKey(t);break;case"Escape":this.onEscapeKey(t);break;case"Tab":this.onTabKey(t);break;case"Backspace":this.onBackspaceKey(t);break;case"ShiftLeft":case"ShiftRight":break;default:break}}onArrowDownKey(t){if(!this.overlayVisible)return;let e=this.focusedOptionIndex()!==-1?this.findNextOptionIndex(this.focusedOptionIndex()):this.findFirstFocusedOptionIndex();this.changeFocusedOptionIndex(t,e),t.preventDefault(),t.stopPropagation()}onArrowUpKey(t){if(this.overlayVisible)if(t.altKey)this.focusedOptionIndex()!==-1&&this.onOptionSelect(t,this.visibleOptions()[this.focusedOptionIndex()]),this.overlayVisible&&this.hide(),t.preventDefault();else{let e=this.focusedOptionIndex()!==-1?this.findPrevOptionIndex(this.focusedOptionIndex()):this.findLastFocusedOptionIndex();this.changeFocusedOptionIndex(t,e),t.preventDefault(),t.stopPropagation()}}onArrowLeftKey(t){let e=t.currentTarget;this.focusedOptionIndex.set(-1),this.multiple&&(P.isEmpty(e.value)&&this.hasSelectedOption()?(T.focus(this.multiContainerEL.nativeElement),this.focusedMultipleOptionIndex.set(this.modelValue().length)):t.stopPropagation())}onArrowRightKey(t){this.focusedOptionIndex.set(-1),this.multiple&&t.stopPropagation()}onHomeKey(t){let{currentTarget:e}=t,i=e.value.length;e.setSelectionRange(0,t.shiftKey?i:0),this.focusedOptionIndex.set(-1),t.preventDefault()}onEndKey(t){let{currentTarget:e}=t,i=e.value.length;e.setSelectionRange(t.shiftKey?0:i,i),this.focusedOptionIndex.set(-1),t.preventDefault()}onPageDownKey(t){this.scrollInView(this.visibleOptions().length-1),t.preventDefault()}onPageUpKey(t){this.scrollInView(0),t.preventDefault()}onEnterKey(t){this.overlayVisible?(this.focusedOptionIndex()!==-1&&(this.onOptionSelect(t,this.visibleOptions()[this.focusedOptionIndex()]),t.preventDefault()),this.hide()):this.onArrowDownKey(t)}onEscapeKey(t){this.overlayVisible&&this.hide(!0),t.preventDefault()}onTabKey(t){this.focusedOptionIndex()!==-1&&this.onOptionSelect(t,this.visibleOptions()[this.focusedOptionIndex()]),this.overlayVisible&&this.hide()}onBackspaceKey(t){if(this.multiple){if(P.isNotEmpty(this.modelValue())&&!this.inputEL.nativeElement.value){let e=this.modelValue()[this.modelValue().length-1],i=this.modelValue().slice(0,-1);this.updateModel(i),this.onUnselect.emit({originalEvent:t,value:e})}t.stopPropagation()}!this.multiple&&this.showClear&&this.findSelectedOptionIndex()!=-1&&this.clear()}onArrowLeftKeyOnMultiple(t){let e=this.focusedMultipleOptionIndex()<1?0:this.focusedMultipleOptionIndex()-1;this.focusedMultipleOptionIndex.set(e)}onArrowRightKeyOnMultiple(t){let e=this.focusedMultipleOptionIndex();e++,this.focusedMultipleOptionIndex.set(e),e>this.modelValue().length-1&&(this.focusedMultipleOptionIndex.set(-1),T.focus(this.inputEL.nativeElement))}onBackspaceKeyOnMultiple(t){this.focusedMultipleOptionIndex()!==-1&&this.removeOption(t,this.focusedMultipleOptionIndex())}onOptionSelect(t,e,i=!0){let n=this.getOptionValue(e);this.multiple?(this.inputEL.nativeElement.value="",this.isSelected(e)||this.updateModel([...this.modelValue()||[],n])):this.updateModel(n),this.onSelect.emit({originalEvent:t,value:e}),i&&this.hide(!0)}onOptionMouseEnter(t,e){this.focusOnHover&&this.changeFocusedOptionIndex(t,e)}search(t,e,i){e!=null&&(i==="input"&&e.trim().length<this.minLength||(this.loading=!0,this.completeMethod.emit({originalEvent:t,query:e})))}removeOption(t,e){t.stopPropagation();let i=this.modelValue()[e],n=this.modelValue().filter((l,h)=>h!==e).map(l=>this.getOptionValue(l));this.updateModel(n),this.onUnselect.emit({originalEvent:t,value:i}),T.focus(this.inputEL.nativeElement)}updateModel(t){this.value=t,this.modelValue.set(t),this.onModelChange(t),this.updateInputValue(),this.cd.markForCheck()}updateInputValue(){this.inputEL&&this.inputEL.nativeElement&&(this.multiple?this.inputEL.nativeElement.value="":this.inputEL.nativeElement.value=this.inputValue())}autoUpdateModel(){if((this.selectOnFocus||this.autoHighlight)&&this.autoOptionFocus&&!this.hasSelectedOption()){let t=this.findFirstFocusedOptionIndex();this.focusedOptionIndex.set(t),this.onOptionSelect(null,this.visibleOptions()[this.focusedOptionIndex()],!1)}}scrollInView(t=-1){let e=t!==-1?`${this.id}_${t}`:this.focusedOptionId;if(this.itemsViewChild&&this.itemsViewChild.nativeElement){let i=T.findSingle(this.itemsViewChild.nativeElement,`li[id="${e}"]`);i?i.scrollIntoView&&i.scrollIntoView({block:"nearest",inline:"nearest"}):this.virtualScrollerDisabled||setTimeout(()=>{this.virtualScroll&&this.scroller?.scrollToIndex(t!==-1?t:this.focusedOptionIndex())},0)}}changeFocusedOptionIndex(t,e){this.focusedOptionIndex()!==e&&(this.focusedOptionIndex.set(e),this.scrollInView(),this.selectOnFocus&&this.onOptionSelect(t,this.visibleOptions()[e],!1))}show(t=!1){this.dirty=!0,this.overlayVisible=!0;let e=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(e),t&&T.focus(this.inputEL.nativeElement),t&&T.focus(this.inputEL.nativeElement),this.onShow.emit(),this.cd.markForCheck()}hide(t=!1){let e=()=>{this.dirty=t,this.overlayVisible=!1,this.focusedOptionIndex.set(-1),t&&T.focus(this.inputEL.nativeElement),this.onHide.emit(),this.cd.markForCheck()};this.virtualScroll&&this.scroller.onScrollChange(event),setTimeout(()=>{e()},0)}clear(){this.updateModel(null),this.inputEL.nativeElement.value="",this.onClear.emit()}writeValue(t){this.value=t,this.modelValue.set(t),this.updateInputValue(),this.cd.markForCheck()}hasSelectedOption(){return P.isNotEmpty(this.modelValue())}getAriaPosInset(t){return(this.optionGroupLabel?t-this.visibleOptions().slice(0,t).filter(e=>this.isOptionGroup(e)).length:t)+1}getOptionLabel(t){return this.field||this.optionLabel?P.resolveFieldData(t,this.field||this.optionLabel):t&&t.label!=null?t.label:t}getOptionValue(t){return this.optionValue?P.resolveFieldData(t,this.optionValue):t}getOptionIndex(t,e){return this.virtualScrollerDisabled?t:e&&e.getItemOptions(t).index}getOptionGroupLabel(t){return this.optionGroupLabel?P.resolveFieldData(t,this.optionGroupLabel):t&&t.label!=null?t.label:t}getOptionGroupChildren(t){return this.optionGroupChildren?P.resolveFieldData(t,this.optionGroupChildren):t.items}getSelectedOption(t){return this.optionValue?(this.suggestions||[]).find(e=>P.resolveFieldData(e,this.optionValue)===t):t}getMultipleLabel(t){let e=this.getSelectedOption(t);return this.getOptionLabel(e)}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}onOverlayAnimationStart(t){if(t.toState==="visible"&&(this.itemsWrapper=T.findSingle(this.overlayViewChild.overlayViewChild?.nativeElement,this.virtualScroll?".p-scroller":".p-autocomplete-panel"),this.virtualScroll&&(this.scroller?.setContentEl(this.itemsViewChild?.nativeElement),this.scroller.viewInit()),this.visibleOptions()&&this.visibleOptions().length))if(this.virtualScroll){let e=this.modelValue()?this.focusedOptionIndex():-1;e!==-1&&this.scroller?.scrollToIndex(e)}else{let e=T.findSingle(this.itemsWrapper,".p-autocomplete-item.p-highlight");e&&e.scrollIntoView({block:"nearest",inline:"center"})}}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}static \u0275fac=function(e){return new(e||o)(C(ve),C(ge),C(fe),C(J),C(ke),C(Ve),C(he))};static \u0275cmp=V({type:o,selectors:[["p-autoComplete"]],contentQueries:function(e,i,n){if(e&1&&xe(n,Y,4),e&2){let l;A(l=D())&&(i.templates=l)}},viewQuery:function(e,i){if(e&1&&(H(vi,5),H(yi,5),H(Ii,5),H(wi,5),H(Oi,5),H(Si,5),H(Ti,5),H(Mi,5)),e&2){let n;A(n=D())&&(i.containerEL=n.first),A(n=D())&&(i.inputEL=n.first),A(n=D())&&(i.multiInputEl=n.first),A(n=D())&&(i.multiContainerEL=n.first),A(n=D())&&(i.dropdownButton=n.first),A(n=D())&&(i.itemsViewChild=n.first),A(n=D())&&(i.scroller=n.first),A(n=D())&&(i.overlayViewChild=n.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,i){e&2&&pt("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused&&!i.disabled||i.autofocus||i.overlayVisible)("p-autocomplete-clearable",i.showClear&&!i.disabled)},inputs:{minLength:[2,"minLength","minLength",N],delay:[2,"delay","delay",N],style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",inputStyle:"inputStyle",inputId:"inputId",inputStyleClass:"inputStyleClass",placeholder:"placeholder",readonly:[2,"readonly","readonly",y],disabled:[2,"disabled","disabled",y],scrollHeight:"scrollHeight",lazy:[2,"lazy","lazy",y],virtualScroll:[2,"virtualScroll","virtualScroll",y],virtualScrollItemSize:[2,"virtualScrollItemSize","virtualScrollItemSize",N],virtualScrollOptions:"virtualScrollOptions",maxlength:[2,"maxlength","maxlength",t=>N(t,null)],name:"name",required:[2,"required","required",y],size:[2,"size","size",N],appendTo:"appendTo",autoHighlight:[2,"autoHighlight","autoHighlight",y],forceSelection:[2,"forceSelection","forceSelection",y],type:"type",autoZIndex:[2,"autoZIndex","autoZIndex",y],baseZIndex:[2,"baseZIndex","baseZIndex",N],ariaLabel:"ariaLabel",dropdownAriaLabel:"dropdownAriaLabel",ariaLabelledBy:"ariaLabelledBy",dropdownIcon:"dropdownIcon",unique:[2,"unique","unique",y],group:[2,"group","group",y],completeOnFocus:[2,"completeOnFocus","completeOnFocus",y],showClear:[2,"showClear","showClear",y],field:"field",dropdown:[2,"dropdown","dropdown",y],showEmptyMessage:[2,"showEmptyMessage","showEmptyMessage",y],dropdownMode:"dropdownMode",multiple:[2,"multiple","multiple",y],tabindex:[2,"tabindex","tabindex",N],dataKey:"dataKey",emptyMessage:"emptyMessage",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autofocus:[2,"autofocus","autofocus",y],autocomplete:"autocomplete",optionGroupChildren:"optionGroupChildren",optionGroupLabel:"optionGroupLabel",overlayOptions:"overlayOptions",suggestions:"suggestions",itemSize:"itemSize",optionLabel:"optionLabel",optionValue:"optionValue",id:"id",searchMessage:"searchMessage",emptySelectionMessage:"emptySelectionMessage",selectionMessage:"selectionMessage",autoOptionFocus:[2,"autoOptionFocus","autoOptionFocus",y],selectOnFocus:[2,"selectOnFocus","selectOnFocus",y],searchLocale:[2,"searchLocale","searchLocale",y],optionDisabled:"optionDisabled",focusOnHover:[2,"focusOnHover","focusOnHover",y],variant:"variant"},outputs:{completeMethod:"completeMethod",onSelect:"onSelect",onUnselect:"onUnselect",onFocus:"onFocus",onBlur:"onBlur",onDropdownClick:"onDropdownClick",onClear:"onClear",onKeyUp:"onKeyUp",onShow:"onShow",onHide:"onHide",onLazyLoad:"onLazyLoad"},features:[dt([Tn]),_e],decls:18,vars:24,consts:[["container",""],["overlay",""],["buildInItems",""],["focusInput",""],["multiContainer",""],["token",""],["ddBtn",""],["scroller",""],["items",""],["empty",""],[3,"click","ngClass","ngStyle"],["pAutoFocus","","aria-autocomplete","list","role","combobox",3,"autofocus","ngClass","ngStyle","class","type","autocomplete","required","name","tabindex","readonly","disabled","input","keydown","change","focus","blur","paste","keyup",4,"ngIf"],[4,"ngIf"],["role","listbox",3,"ngClass","tabindex","focus","blur","keydown",4,"ngIf"],["type","button","pButton","","class","p-autocomplete-dropdown p-button-icon-only","pRipple","",3,"disabled","click",4,"ngIf"],[3,"visibleChange","onAnimationStart","onHide","visible","options","target","appendTo","showTransitionOptions","hideTransitionOptions"],[3,"ngClass","ngStyle"],[4,"ngTemplateOutlet"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["role","status","aria-live","polite",1,"p-hidden-accessible"],["pAutoFocus","","aria-autocomplete","list","role","combobox",3,"input","keydown","change","focus","blur","paste","keyup","autofocus","ngClass","ngStyle","type","autocomplete","required","name","tabindex","readonly","disabled"],[3,"styleClass","click",4,"ngIf"],["class","p-autocomplete-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-autocomplete-clear-icon",3,"click"],["role","listbox",3,"focus","blur","keydown","ngClass","tabindex"],["role","option",3,"ngClass",4,"ngFor","ngForOf"],["role","option",1,"p-autocomplete-input-token"],["pAutoFocus","","role","combobox","aria-autocomplete","list",3,"input","keydown","change","focus","blur","paste","keyup","autofocus","ngClass","ngStyle","autocomplete","required","tabindex","readonly","disabled"],["role","option",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-autocomplete-token-label",4,"ngIf"],[1,"p-autocomplete-token-icon",3,"click"],[3,"styleClass",4,"ngIf"],["class","p-autocomplete-token-icon",4,"ngIf"],[1,"p-autocomplete-token-label"],[3,"styleClass"],[1,"p-autocomplete-token-icon"],[3,"styleClass","spin",4,"ngIf"],["class","p-autocomplete-loader pi-spin ",4,"ngIf"],[3,"styleClass","spin"],[1,"p-autocomplete-loader","pi-spin"],["type","button","pButton","","pRipple","",1,"p-autocomplete-dropdown","p-button-icon-only",3,"click","disabled"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"onLazyLoad","items","itemSize","autoSize","lazy","options"],["pTemplate","content"],["pTemplate","loader"],["role","listbox",1,"p-autocomplete-items",3,"ngClass"],["ngFor","",3,"ngForOf"],["class","p-autocomplete-empty-message","role","option",3,"ngStyle",4,"ngIf"],["role","option",1,"p-autocomplete-item-group",3,"ngStyle"],["pRipple","","role","option",1,"p-autocomplete-item",3,"click","mouseenter","ngStyle","ngClass"],["role","option",1,"p-autocomplete-empty-message",3,"ngStyle"],[4,"ngIf","ngIfElse"]],template:function(e,i){if(e&1){let n=S();a(0,"div",10,0),x("click",function(h){return g(n),f(i.onContainerClick(h))}),_(2,Ai,2,23,"input",11)(3,Ni,3,2,"ng-container",12)(4,$i,6,27,"ul",13)(5,Xi,3,2,"ng-container",12)(6,an,4,5,"button",14),a(7,"p-overlay",15,1),q("visibleChange",function(h){return g(n),G(i.overlayVisible,h)||(i.overlayVisible=h),f(h)}),x("onAnimationStart",function(h){return g(n),f(i.onOverlayAnimationStart(h))})("onHide",function(){return g(n),f(i.hide())}),a(9,"div",16),_(10,rn,1,0,"ng-container",17)(11,mn,4,10,"p-scroller",18)(12,hn,2,6,"ng-container",12)(13,On,4,7,"ng-template",null,2,ht)(15,Sn,1,0,"ng-container",17),s(),a(16,"span",19),d(17),s()()()}e&2&&(te(i.styleClass),u("ngClass",i.containerClass)("ngStyle",i.style),c(2),u("ngIf",!i.multiple),c(),u("ngIf",i.filled&&!i.disabled&&i.showClear&&!i.loading),c(),u("ngIf",i.multiple),c(),u("ngIf",i.loading),c(),u("ngIf",i.dropdown),c(),K("visible",i.overlayVisible),u("options",i.overlayOptions)("target","@parent")("appendTo",i.appendTo)("showTransitionOptions",i.showTransitionOptions)("hideTransitionOptions",i.hideTransitionOptions),c(2),te(i.panelStyleClass),u("ngClass",i.panelClass)("ngStyle",i.panelStyles),c(),u("ngTemplateOutlet",i.headerTemplate),c(),u("ngIf",i.virtualScroll),c(),u("ngIf",!i.virtualScroll),c(3),u("ngTemplateOutlet",i.footerTemplate),c(2),O(" ",i.selectedMessageText," "))},dependencies:()=>[ye,ne,oe,we,Ie,Nt,Y,ze,Ae,Ut,Bt,Je,Ye,ae,et],styles:[`@layer primeng{.p-autocomplete{display:inline-flex;position:relative}.p-autocomplete-loader{position:absolute;top:50%;margin-top:-.5rem}.p-autocomplete-dd .p-autocomplete-input{flex:1 1 auto;width:1%}.p-autocomplete-dd .p-autocomplete-input,.p-autocomplete-dd .p-autocomplete-multiple-container{border-top-right-radius:0;border-bottom-right-radius:0}.p-autocomplete-dd .p-autocomplete-dropdown{border-top-left-radius:0;border-bottom-left-radius:0}.p-autocomplete-panel{overflow:auto}.p-autocomplete-items{margin:0;padding:0;list-style-type:none}.p-autocomplete-item{cursor:pointer;white-space:nowrap;position:relative;overflow:hidden}.p-autocomplete-multiple-container{margin:0;padding:0;list-style-type:none;cursor:text;overflow:hidden;display:flex;align-items:center;flex-wrap:wrap}.p-autocomplete-token{width:fit-content;cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-autocomplete-token-icon{display:flex;cursor:pointer}.p-autocomplete-input-token{flex:1 1 auto;display:inline-flex}.p-autocomplete-input-token input{border:0 none;outline:0 none;background-color:transparent;margin:0;padding:0;box-shadow:none;border-radius:0;width:100%}.p-fluid .p-autocomplete{display:flex}.p-fluid .p-autocomplete-dd .p-autocomplete-input{width:1%}.p-autocomplete-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-autocomplete-clearable{position:relative}}
`],encapsulation:2,changeDetection:0})}return o})(),ei=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=z({type:o});static \u0275inj=B({imports:[X,tt,je,Ne,Z,De,it,Xe,Je,Ye,ae,et,tt,Z,it,Xe]})}return o})();var Pn=["*"],En=(o,r)=>({showTransitionParams:o,hideTransitionParams:r}),Fn=(o,r)=>({value:o,params:r});function Vn(o,r){o&1&&k(0)}function kn(o,r){o&1&&I(0,"TimesIcon",8),o&2&&u("styleClass","p-overlaypanel-close-icon")}function An(o,r){}function Dn(o,r){o&1&&_(0,An,0,0,"ng-template")}function Ln(o,r){if(o&1&&(a(0,"span",9),_(1,Dn,1,0,null,3),s()),o&2){let t=m(3);c(),u("ngTemplateOutlet",t.closeIconTemplate)}}function Bn(o,r){if(o&1){let t=S();a(0,"button",5),x("click",function(i){g(t);let n=m(2);return f(n.onCloseClick(i))})("keydown.enter",function(){g(t);let i=m(2);return f(i.hide())}),_(1,kn,1,1,"TimesIcon",6)(2,Ln,2,1,"span",7),s()}if(o&2){let t=m(2);M("aria-label",t.ariaCloseLabel),c(),u("ngIf",!t.closeIconTemplate),c(),u("ngIf",t.closeIconTemplate)}}function zn(o,r){if(o&1){let t=S();a(0,"div",1),x("click",function(i){g(t);let n=m();return f(n.onOverlayClick(i))})("@animation.start",function(i){g(t);let n=m();return f(n.onAnimationStart(i))})("@animation.done",function(i){g(t);let n=m();return f(n.onAnimationEnd(i))}),a(1,"div",2),x("click",function(i){g(t);let n=m();return f(n.onContentClick(i))})("mousedown",function(i){g(t);let n=m();return f(n.onContentClick(i))}),Ce(2),_(3,Vn,1,0,"ng-container",3),s(),_(4,Bn,3,3,"button",4),s()}if(o&2){let t=m();te(t.styleClass),u("ngClass","p-overlaypanel p-component")("ngStyle",t.style)("@animation",ie(13,Fn,t.overlayVisible?"open":"close",ie(10,En,t.showTransitionOptions,t.hideTransitionOptions))),M("aria-modal",t.overlayVisible)("aria-label",t.ariaLabel)("aria-labelledBy",t.ariaLabelledBy),c(3),u("ngTemplateOutlet",t.contentTemplate),c(),u("ngIf",t.showCloseIcon)}}var ti=(()=>{class o{document;platformId;el;renderer;cd;zone;config;overlayService;ariaLabel;ariaLabelledBy;dismissable=!0;showCloseIcon;style;styleClass;appendTo="body";autoZIndex=!0;ariaCloseLabel;baseZIndex=0;focusOnShow=!0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";onShow=new F;onHide=new F;templates;container;overlayVisible=!1;render=!1;isOverlayAnimationInProgress=!1;selfClick=!1;documentClickListener;target;willHide;scrollHandler;documentResizeListener;contentTemplate;closeIconTemplate;destroyCallback;overlayEventListener;overlaySubscription;constructor(t,e,i,n,l,h,b,w){this.document=t,this.platformId=e,this.el=i,this.renderer=n,this.cd=l,this.zone=h,this.config=b,this.overlayService=w}ngAfterContentInit(){this.templates?.forEach(t=>{switch(t.getType()){case"content":this.contentTemplate=t.template;break;case"closeicon":this.closeIconTemplate=t.template;break;default:this.contentTemplate=t.template;break}this.cd.markForCheck()})}bindDocumentClickListener(){if(Se(this.platformId)&&!this.documentClickListener&&this.dismissable){let t=T.isIOS()?"touchstart":"click",e=this.el?this.el.nativeElement.ownerDocument:this.document;this.documentClickListener=this.renderer.listen(e,t,i=>{!this.container?.contains(i.target)&&this.target!==i.target&&!this.target.contains(i.target)&&!this.selfClick&&this.hide(),this.selfClick=!1,this.cd.markForCheck()})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null,this.selfClick=!1)}toggle(t,e){this.isOverlayAnimationInProgress||(this.overlayVisible?(this.hasTargetChanged(t,e)&&(this.destroyCallback=()=>{this.show(null,e||t.currentTarget||t.target)}),this.hide()):this.show(t,e))}show(t,e){e&&t&&t.stopPropagation(),!this.isOverlayAnimationInProgress&&(this.target=e||t.currentTarget||t.target,this.overlayVisible=!0,this.render=!0,this.cd.markForCheck())}onOverlayClick(t){this.overlayService.add({originalEvent:t,target:this.el.nativeElement}),this.selfClick=!0}onContentClick(t){let e=t.target;this.selfClick=t.offsetX<e.clientWidth&&t.offsetY<e.clientHeight}hasTargetChanged(t,e){return this.target!=null&&this.target!==(e||t.currentTarget||t.target)}appendContainer(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.container):T.appendChild(this.container,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.container)}align(){this.autoZIndex&&Ee.set("overlay",this.container,this.baseZIndex+this.config.zIndex.overlay),T.absolutePosition(this.container,this.target,!1);let t=T.getOffset(this.container),e=T.getOffset(this.target),i=this.document.defaultView?.getComputedStyle(this.container).getPropertyValue("border-radius"),n=0;t.left<e.left&&(n=e.left-t.left-parseFloat(i)*2),this.container?.style.setProperty("--overlayArrowLeft",`${n}px`),t.top<e.top&&(T.addClass(this.container,"p-overlaypanel-flipped"),this.showCloseIcon&&this.renderer.setStyle(this.container,"margin-top","-30px"))}onAnimationStart(t){t.toState==="open"&&(this.container=t.element,this.appendContainer(),this.align(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.focusOnShow&&this.focus(),this.overlayEventListener=e=>{this.container&&this.container.contains(e.target)&&(this.selfClick=!0)},this.overlaySubscription=this.overlayService.clickObservable.subscribe(this.overlayEventListener),this.onShow.emit(null)),this.isOverlayAnimationInProgress=!0}onAnimationEnd(t){switch(t.toState){case"void":this.destroyCallback&&(this.destroyCallback(),this.destroyCallback=null),this.overlaySubscription&&this.overlaySubscription.unsubscribe();break;case"close":this.autoZIndex&&Ee.clear(this.container),this.overlaySubscription&&this.overlaySubscription.unsubscribe(),this.onContainerDestroy(),this.onHide.emit({}),this.render=!1;break}this.isOverlayAnimationInProgress=!1}focus(){let t=T.findSingle(this.container,"[autofocus]");t&&this.zone.runOutsideAngular(()=>{setTimeout(()=>t.focus(),5)})}hide(){this.overlayVisible=!1,this.cd.markForCheck()}onCloseClick(t){this.hide(),t.preventDefault()}onEscapeKeydown(t){this.hide()}onWindowResize(){this.overlayVisible&&!T.isTouchDevice()&&this.hide()}bindDocumentResizeListener(){if(Se(this.platformId)&&!this.documentResizeListener){let t=this.document.defaultView;this.documentResizeListener=this.renderer.listen(t,"resize",this.onWindowResize.bind(this))}}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindScrollListener(){Se(this.platformId)&&(this.scrollHandler||(this.scrollHandler=new vt(this.target,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener())}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onContainerDestroy(){this.cd.destroyed||(this.target=null),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.container&&this.autoZIndex&&Ee.clear(this.container),this.cd.destroyed||(this.target=null),this.destroyCallback=null,this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.overlaySubscription&&this.overlaySubscription.unsubscribe()}static \u0275fac=function(e){return new(e||o)(C(ve),C(st),C(ge),C(fe),C(J),C(he),C(ke),C(Ve))};static \u0275cmp=V({type:o,selectors:[["p-overlayPanel"]],contentQueries:function(e,i,n){if(e&1&&xe(n,Y,4),e&2){let l;A(l=D())&&(i.templates=l)}},hostAttrs:[1,"p-element"],hostBindings:function(e,i){e&1&&x("keydown.escape",function(l){return i.onEscapeKeydown(l)},!1,ct)},inputs:{ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",dismissable:[2,"dismissable","dismissable",y],showCloseIcon:[2,"showCloseIcon","showCloseIcon",y],style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:[2,"autoZIndex","autoZIndex",y],ariaCloseLabel:"ariaCloseLabel",baseZIndex:[2,"baseZIndex","baseZIndex",N],focusOnShow:[2,"focusOnShow","focusOnShow",y],showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onShow:"onShow",onHide:"onHide"},features:[_e],ngContentSelectors:Pn,decls:1,vars:1,consts:[["role","dialog",3,"ngClass","ngStyle","class","click",4,"ngIf"],["role","dialog",3,"click","ngClass","ngStyle"],[1,"p-overlaypanel-content",3,"click","mousedown"],[4,"ngTemplateOutlet"],["type","button","class","p-overlaypanel-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],["type","button","pRipple","",1,"p-overlaypanel-close","p-link",3,"click","keydown.enter"],[3,"styleClass",4,"ngIf"],["class","p-overlaypanel-close-icon",4,"ngIf"],[3,"styleClass"],[1,"p-overlaypanel-close-icon"]],template:function(e,i){e&1&&(be(),_(0,zn,5,16,"div",0)),e&2&&u("ngIf",i.render)},dependencies:()=>[ye,oe,we,Ie,Ae,ae],styles:[`@layer primeng{.p-overlaypanel{position:absolute;margin-top:10px;top:0;left:0}.p-overlaypanel-flipped{margin-top:0;margin-bottom:10px}.p-overlaypanel-close{display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-overlaypanel:after,.p-overlaypanel:before{bottom:100%;left:calc(var(--overlayArrowLeft, 0) + 1.25rem);content:" ";height:0;width:0;position:absolute;pointer-events:none}.p-overlaypanel:after{border-width:8px;margin-left:-8px}.p-overlaypanel:before{border-width:10px;margin-left:-10px}.p-overlaypanel-shifted:after,.p-overlaypanel-shifted:before{left:auto;right:1.25em;margin-left:auto}.p-overlaypanel-flipped:after,.p-overlaypanel-flipped:before{bottom:auto;top:100%}.p-overlaypanel.p-overlaypanel-flipped:after{border-bottom-color:transparent}.p-overlaypanel.p-overlaypanel-flipped:before{border-bottom-color:transparent}}
`],encapsulation:2,data:{animation:[bt("animation",[Pe("void",Me({transform:"scaleY(0.8)",opacity:0})),Pe("close",Me({opacity:0})),Pe("open",Me({transform:"translateY(0)",opacity:1})),Ze("void => open",Qe("{{showTransitionParams}}")),Ze("open => close",Qe("{{hideTransitionParams}}"))])]},changeDetection:0})}return o})(),ii=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=z({type:o});static \u0275inj=B({imports:[X,De,Z,ae,Z]})}return o})();function Un(o,r){if(o&1&&(a(0,"div"),d(1),s()),o&2){let t=r.$implicit;c(),pe("",t.id3," - ",t.descrip,"")}}function jn(o,r){if(o&1&&(a(0,"div"),d(1),s()),o&2){let t=r.$implicit;c(),pe("",t.codserv," - ",t.descrip,"")}}function Rn(o,r){if(o&1&&(a(0,"div"),d(1),s()),o&2){let t=r.$implicit;c(),v(t.descrip)}}function Hn(o,r){if(o&1){let t=S();a(0,"tr")(1,"th"),d(2),s(),a(3,"td",66),d(4),s(),a(5,"td",67),d(6),s(),a(7,"td"),d(8),s(),a(9,"td"),d(10),s(),a(11,"td"),d(12),s(),a(13,"td"),d(14),s(),a(15,"td"),d(16),s(),a(17,"td")(18,"i",68),x("click",function(){let i=g(t).index,n=m();return f(n.removeItem(i,"itemFact"))}),s()()()}if(o&2){let t=r.$implicit,e=r.index,i=m();c(2),v(e+1+i.cxcItems.length),c(2),v(t.coditem),c(2),v(t.descrip1),c(2),v(t.cantidad),c(2),v(t.precio),c(2),v(t.descuento),c(2),v(t.impuesto),c(2),v(t.totalitem)}}function Kn(o,r){if(o&1){let t=S();a(0,"tr")(1,"th"),d(2),s(),a(3,"td",66),d(4),s(),a(5,"td",67),d(6),s(),a(7,"td"),d(8),s(),a(9,"td"),d(10),s(),a(11,"td"),d(12),s(),a(13,"td"),d(14),s(),a(15,"td"),d(16),s(),a(17,"td")(18,"i",68),x("click",function(){let i=g(t).index,n=m();return f(n.removeItem(i,"manual"))}),s()()()}if(o&2){let t=r.$implicit,e=r.index,i=m();c(2),v(e+1+i.cxcItems.length),c(2),v(t.codigo),c(2),v(t.descripcion),c(2),v(t.cantidad),c(2),v(t.precio),c(2),v(t.descuento),c(2),v(t.impuesto),c(2),v(t.totalItem)}}var ni=(()=>{let r=class r{constructor(e,i,n,l,h,b,w,E){this.invoiceFormService=e,this.cdr=i,this.dialogService=n,this.router=l,this.sharedService=h,this.versionService=b,this.messageService=w,this.theFactoryService=E,this.services=[],this.filteredServices=[],this.customers=[],this.filteredCustomers=[],this.items=[],this.usdPrice=0,this.subtotalBs=0,this.subtotalUsd=0,this.discount=0,this.iva=0,this.igtf=0,this.totalBs=0,this.totalUsd=0,this.price=0,this.totalItems=0,this.cxcItems=[],this.itemFactItems=[],this.isCxcLoaded=!1,this.invoiceForm=this.invoiceFormService.formInvoice(),this.customersForm=this.invoiceFormService.formUserData(),this.api=me.apiTheFactory,this.invoiceForm=this.invoiceFormService.formInvoice(),this.customersForm=this.invoiceFormService.formUserData()}ngOnInit(){this.loadServices(),this.loadCustomers(),this.loadItems(),this.loadUsd(),this.calculateTotals(),this.loadCorrelatives(),this.loadCxcItems(),this.loadItemFactItems(),this.loadUsd(),this.usdPrice=this.getUsdPrice(),this.sharedService.cxcItems$.subscribe(n=>{this.cxcItems=n,this.calculateTotals(),this.cdr.detectChanges()}),this.sharedService.itemFact$.subscribe(n=>{this.itemFactItems.push(n),this.calculateTotals(),this.cdr.detectChanges()}),window.addEventListener("storage",this.handleStorageChange.bind(this));let e=new Date;this.currentDate=this.formatDate(e);let i=new Date;i.setDate(e.getDate()+7),this.dueDate=this.formatDate(i),this.customersForm.get("descuento")?.valueChanges.subscribe(()=>{let n=parseFloat(this.customersForm.get("descuento")?.value)||0;this.discount=this.subtotalBs*n/100,this.calculateTotals()}),this.invoiceForm.get("cantidad")?.valueChanges.subscribe(()=>{this.updateTotalAndTax(),this.calculateTotals()}),this.invoiceForm.get("precio")?.valueChanges.subscribe(()=>{this.updateTotalAndTax(),this.calculateTotals()}),this.invoiceForm.get("descuento")?.valueChanges.subscribe(()=>{this.updateTotalAndTax(),this.calculateTotals()}),this.invoiceForm.get("impuesto")?.valueChanges.subscribe(()=>{this.updateTotalAndTax(),this.calculateTotals()}),this.totalItems=this.items.length,this.versionService.getVersion().subscribe(n=>{this.version=n.version,console.log("Version:",this.version)}),this.sharedService.itemFact$.subscribe(()=>{this.calculateTotals()}),this.theFactoryService.authenticate().subscribe(n=>{console.log("Authenticated:",n)},n=>{console.error("Error authenticating:",n)}),this.invoiceFormService.getCxc().subscribe(n=>{let l=n.filter(h=>h.tipocxc==="70");console.log("Filtered Cxc:",l)},n=>{console.error("Error fetching Cxc:",n)}),this.invoiceFormService.getItems().subscribe(n=>{let l=n.filter(h=>h.tipofac==="H");console.log("Filtered items:",l)},n=>{console.error("Error fetching items:",n)})}handleStorageChange(e){e.key==="itemFact"&&(this.loadItemFactItems(),this.calculateTotals())}formatDate(e){let i=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear();return`${i}/${n}/${l}`}loadCxcItems(){let e=localStorage.getItem("cxc");e&&(this.cxcItems=JSON.parse(e))}loadItemFactItems(){let e=localStorage.getItem("itemFact");e?(this.itemFactItems=JSON.parse(e),this.calculateTotals(),this.updateTotalAndTax(),this.totalItems=this.items.length,this.cdr.detectChanges()):console.error("No itemFact found in localStorage")}loadCorrelatives(){this.invoiceFormService.getCorrelatives().subscribe(e=>{if(console.log("Correlatives:",e),e.length>12){let i=e[12];this.prFactValueInt=i.valueint,console.log("PrFact valueint:",this.prFactValueInt),this.sharedService.setPrFactValueInt(this.prFactValueInt)}else console.error("The 12th object is not available in the response")},e=>{console.error("Error fetching correlatives:",e)})}loadServices(){this.invoiceFormService.getServices().subscribe(e=>{this.services=e})}loadCustomers(){this.invoiceFormService.getCustomers().subscribe(e=>{this.customers=e,console.log(e)})}loadUsd(){this.invoiceFormService.getUsd().subscribe(e=>{this.usdPrice=e?.monitors?.usd?.price||0,localStorage.setItem("usdPrice",this.usdPrice.toString()),console.log("aqui"+this.usdPrice)})}getUsdPrice(){let e=localStorage.getItem("usdPrice");return e?parseFloat(e):0}filterServices(e){let i=e.query.toLowerCase();this.filteredServices=this.services.filter(n=>{let l=n.codserv?n.codserv.toLowerCase():"",h=n.descrip?n.descrip.toLowerCase():"";return l.includes(i)||h.includes(i)})}filterCustomers(e){let i=e.query.toLowerCase();this.filteredCustomers=this.customers.filter(n=>{let l=n.id3?.toLowerCase()||"",h=n.descrip?.toLowerCase()||"";return l.includes(i)||h.includes(i)})}selectService(e){let i=e.value;console.log("Servicio seleccionado:",i);let n={codigo:i.codserv||"",descripcion:i.descrip||"",cantidad:i.cantidad||1,precio:i.precioi1||"",descuento:i.descuento||"",impuesto:(i.cantidad||1)*(i.precioi1||0)*(i.impuesto||0),totalItem:(i.cantidad||1)*(i.precioi1||0)};this.invoiceForm.patchValue(n),this.filteredServices=[]}selectCustomer(e){let i=e.value,n=i.codclie,l=i.id3;console.log("Cliente seleccionado:",i);let h={cedula:i.id3||"",cliente:i.descrip||"",direccion:i.direc1||"",telefono:i.telef||"",email:i.email||"",descuento:i.descuento||"",tipoCli:i.tipoCli||1};this.customersForm.patchValue(h),this.filteredCustomers=[],this.sharedService.setSelectedCustomer(qe(le({},i),{descrip:i.descrip})),this.filterDataByCedula(l)}filterDataByCedula(e){this.invoiceFormService.getCxc().subscribe(i=>{let n=i.filter(l=>l.codclie===e&&l.monto>0);console.log("Filtered Cxc:",n),this.isCxcLoaded=n.length>0,this.cdr.detectChanges(),n.length>0&&this.showCollectionNotices(),this.sharedService.setFilteredData(n)},i=>{console.error("Error fetching Cxc:",i)})}addItem(){let e=this.invoiceForm.value;if(e.precio&&e.cantidad){let i=qe(le({},e),{totalItem:e.cantidad*e.precio});this.items.push(i),localStorage.setItem("invoiceItems",JSON.stringify(this.items)),this.calculateTotals(),this.invoiceForm.reset(),this.cdr.detectChanges()}else this.messageService.add({severity:"error",summary:"Error",detail:"El \xEDtem debe tener precio y cantidad v\xE1lidos."});this.totalItems=this.items.length}loadItems(){let e=localStorage.getItem("invoiceItems");e?(this.items=JSON.parse(e),this.totalItems=this.items.length,this.calculateTotals()):(this.items=[],this.totalItems=0)}removeItem(e,i){i==="cxc"?(this.cxcItems.splice(e,1),localStorage.setItem("cxc",JSON.stringify(this.cxcItems))):i==="itemFact"?(this.itemFactItems.splice(e,1),localStorage.setItem("itemFact",JSON.stringify(this.itemFactItems))):(this.items.splice(e,1),localStorage.setItem("invoiceItems",JSON.stringify(this.items))),this.calculateTotals(),this.cdr.detectChanges(),this.totalItems=this.items.length+this.cxcItems.length+this.itemFactItems.length}updateTotalAndTax(){let e=parseFloat(this.invoiceForm.get("cantidad")?.value?.toString()||"0"),i=parseFloat(this.invoiceForm.get("precio")?.value?.toString()||"0"),n=parseFloat(this.invoiceForm.get("descuento")?.value?.toString()||"0"),l=.16;if(e>0&&i>0){let h=e*i,b=h*l;this.invoiceForm.get("totalItem")?.setValue(h,{emitEvent:!1}),this.invoiceForm.get("impuesto")?.setValue(b,{emitEvent:!1}),this.subtotalBs=this.items.reduce((E,L)=>E+(parseFloat(L.totalItem)||0),0)+this.itemFactItems.reduce((E,L)=>E+(parseFloat(L.montoneto)||0),0);let w=this.itemFactItems.reduce((E,L)=>E+(parseFloat(L.precio)||0),0);this.subtotalBs+=w,this.iva=isNaN(this.subtotalBs)?0:this.subtotalBs*l,this.totalBs=this.subtotalBs-(isNaN(n)?0:n)+this.iva,this.totalUsd=isNaN(this.totalBs)||isNaN(this.usdPrice)||this.usdPrice===0?0:this.totalBs/this.usdPrice,this.subtotalUsd=isNaN(this.subtotalBs)||isNaN(this.usdPrice)||this.usdPrice===0?0:this.subtotalBs/this.usdPrice}else this.invoiceForm.get("totalItem")?.setValue(null,{emitEvent:!1}),this.invoiceForm.get("impuesto")?.setValue(null,{emitEvent:!1});this.cdr.detectChanges()}calculateTotals(){let n=localStorage.getItem("usdPrice");if(this.usdPrice=n?parseFloat(n):0,!this.usdPrice||this.usdPrice===0){console.warn("El valor del d\xF3lar no est\xE1 disponible.");return}this.subtotalBs=this.items.reduce((b,w)=>b+(parseFloat(w.totalItem)||0),0)+this.itemFactItems.reduce((b,w)=>b+(parseFloat(w.montoneto)||0),0);let l=this.itemFactItems.reduce((b,w)=>b+(parseFloat(w.precio)||0),0);this.subtotalBs+=l;let h=this.itemFactItems.reduce((b,w)=>b+(parseFloat(w.precio)||0)/this.usdPrice,0);this.igtf=this.subtotalBs*.03,this.iva=isNaN(this.subtotalBs)?0:this.subtotalBs*.16,this.totalBs=this.subtotalBs-(isNaN(this.discount)?0:this.discount)+this.iva+this.igtf,this.totalUsd=isNaN(this.totalBs)||isNaN(this.usdPrice)||this.usdPrice===0?0:this.totalBs/this.usdPrice,this.subtotalUsd=isNaN(this.subtotalBs)||isNaN(this.usdPrice)||this.usdPrice===0?0:this.subtotalBs/this.usdPrice,this.subtotalUsd+=h,this.cdr.detectChanges()}onDiscountChange(e){this.discount=parseFloat(e.target.value)||0,this.calculateTotals()}resetForm(){this.invoiceForm.reset(),this.cdr.detectChanges()}clearAll(){this.customersForm.reset(),this.invoiceForm.reset(),this.cxcItems=[],this.items=[],localStorage.removeItem("invoiceItems"),this.calculateTotals(),this.totalItems=0,this.cdr.detectChanges()}toUpperCase(e){let i=e.target;i.value=i.value.toUpperCase(),this.customersForm.get("cedula")?.setValue(i.value.toUpperCase(),{emitEvent:!1})}showPaymentModal(){this.ref=this.dialogService.open($t,{header:"Agregar Pago",width:"35vw",modal:!0,data:{totalBs:this.totalBs,totalUsd:this.totalUsd,subtotalBs:this.subtotalBs,subtotalUsd:this.subtotalUsd,discount:this.discount,iva:this.iva,invoiceNumber:this.prFactValueInt},breakpoints:{"960px":"75vw","640px":"90vw"}})}showCreditNote(){this.ref=this.dialogService.open(Wt,{header:"Nota de Cr\xE9dito",width:"35vw",modal:!0,breakpoints:{"960px":"75vw","640px":"90vw"}})}showSuspendServiceUser(){this.ref=this.dialogService.open(Qt,{header:"Suspender Servicio",width:"35vw",modal:!0,breakpoints:{"960px":"75vw","640px":"90vw"}})}showCollectionNotices(){this.ref=this.dialogService.open(Ht,{header:"Notificaciones de Cobro",width:"35vw",modal:!0,breakpoints:{"960px":"75vw","640px":"90vw"}})}isFormValid(){return this.customersForm.valid&&(this.items.length>0||this.cxcItems.length>0)}logout(){localStorage.clear(),console.log("Logged out successfully"),this.router.navigateByUrl("/login")}};r.\u0275fac=function(i){return new(i||r)(C(Ke),C(J),C(wt),C(Te),C(He),C(Rt),C(Fe),C(Re))},r.\u0275cmp=V({type:r,selectors:[["app-invoice-form"]],decls:194,vars:33,consts:[["op",""],[1,"main-container"],[1,"sidebar"],["icon","pi pi-inbox","title","Avisos de Cobro",1,"btn",3,"click","disabled"],["icon","pi pi-user-minus","title","Suspender Servicio",1,"btn",3,"click"],["icon","pi pi-times","title","Suspender Servicio",1,"btn2",3,"click"],["label","Pagar",1,"pagar",3,"click","disabled"],[1,"content"],[1,"navbar"],[1,"logo"],["src","../../../../../assets/img/logoImage.jpg","alt","logo"],[1,"user",3,"click"],["src","../../../../../assets/img/avatar2.png","alt","user"],[1,"logOut",3,"click"],[1,"container"],[1,"form"],[1,"mid"],["action",""],[1,"table-bg"],[1,"table"],[1,"total"],[1,"total-row"],[1,"user-panel"],[1,"discount"],[1,"top"],[1,"left"],[1,"tittles"],[1,"tittle"],[1,"right"],[3,"formGroup"],[1,"client-data"],[1,"title"],["id","cedula","placeholder","Cedula","formControlName","cedula",1,"p-autocomplete","p-component","p-inputwrapper",3,"completeMethod","input","onSelect","suggestions","field"],["pTemplate","item"],["type","text","pInputText","","placeholder","Cliente","formControlName","cliente"],["type","text","pInputText","","placeholder","Direccion","formControlName","direccion"],["type","text","pInputText","","placeholder","Tel\xE9fono","formControlName","telefono"],["type","text","pInputText","","placeholder","Email","formControlName","email"],["type","text","pInputText","","placeholder","Direcci\xF3n del servicio","formControlName","direccionServicio"],[1,"down"],["type","text","pInputText","","placeholder","Descuento","name","descuento","formControlName","descuento"],[1,"pi","pi-percentage"],[1,"total-items"],[1,"items"],[1,"footer"],[1,"input-row"],[1,"input-group"],["id","codigo","formControlName","codigo",1,"p-autocomplete","p-component","p-inputwrapper",3,"completeMethod","onSelect","suggestions","field"],["id","descripcion","formControlName","descripcion",1,"p-autocomplete","p-component","p-inputwrapper",3,"completeMethod","onSelect","suggestions","field"],["pInputText","","id","cantidad","formControlName","cantidad"],["for","cantidad"],["pInputText","","id","precio","formControlName","precio"],["for","precio"],["pInputText","","id","descuento","formControlName","descuento"],["for","descuento"],["pInputText","","id","impuesto","formControlName","impuesto"],["for","impuesto"],["pInputText","","id","total-item","formControlName","totalItem"],["for","total-item"],[1,"icons"],[1,"pi","pi-plus","blue-icon",3,"click"],[1,"pi","pi-eraser","red-icon",3,"click"],[1,"items-table-container"],[1,"items-table"],[4,"ngFor","ngForOf"],[1,"footer-content"],[1,"code"],[1,"descrip"],[1,"pi","pi-trash","red-icon",3,"click"]],template:function(i,n){if(i&1){let l=S();a(0,"div",1)(1,"div",2)(2,"p-button",3),x("click",function(){return g(l),f(n.showCollectionNotices())}),s(),a(3,"p-button",4),x("click",function(){return g(l),f(n.showSuspendServiceUser())}),s(),a(4,"p-button",5),x("click",function(){return g(l),f(n.clearAll())}),s(),a(5,"p-button",6),x("click",function(){return g(l),f(n.showPaymentModal())}),s()(),a(6,"div",7)(7,"div",8)(8,"div",9),I(9,"img",10),a(10,"h1"),d(11,"Up Link de Venezuela"),s()(),a(12,"div",11),x("click",function(b){g(l);let w=ce(17);return f(w.toggle(b))}),a(13,"span"),d(14,"Admin"),s(),I(15,"img",12),a(16,"p-overlayPanel",null,0)(18,"div")(19,"p-button",13),x("click",function(){return g(l),f(n.logout())}),d(20,"Cerrar Sesi\xF3n"),s()()()()(),a(21,"div",14)(22,"div",15)(23,"div",16)(24,"form",17)(25,"div",18)(26,"table",19)(27,"tr")(28,"th")(29,"label"),d(30,"Base imponible: "),s()(),a(31,"td")(32,"span"),d(33),s(),a(34,"span"),d(35),s()()(),a(36,"tr")(37,"th")(38,"label"),d(39,"Descuento: "),s()(),a(40,"td")(41,"span"),d(42),s(),a(43,"span"),d(44),s()()(),a(45,"tr")(46,"th")(47,"label"),d(48,"IVA 16%: "),s()(),a(49,"td")(50,"span"),d(51),s(),a(52,"span"),d(53),s()()(),a(54,"tr",20)(55,"th")(56,"label"),d(57,"Total: "),s()(),a(58,"td")(59,"span"),d(60),s(),a(61,"span"),d(62),s()()(),a(63,"tr")(64,"th")(65,"label"),d(66,"IGTF 3%: "),s()(),a(67,"td")(68,"span"),d(69),s(),a(70,"span"),d(71),s()()(),a(72,"tr",21)(73,"th")(74,"label"),d(75,"Total a pagar: "),s()(),a(76,"td")(77,"span"),d(78),s(),a(79,"span"),d(80),s()()()()()()()(),a(81,"div",22)(82,"div",23)(83,"div",24)(84,"div",25)(85,"label"),d(86,"Factura: "),a(87,"span",26),d(88),s()(),a(89,"label"),d(90,"Tasa: "),a(91,"span",27),d(92),W(93,"number"),s()()(),a(94,"div",28)(95,"label"),d(96,"Fecha: "),a(97,"span",27),d(98),s()(),a(99,"label"),d(100,"Vencimiento: "),a(101,"span",27),d(102),s()()()()(),a(103,"form",29)(104,"div",30)(105,"label",31),d(106,"Datos del Cliente"),s(),a(107,"p-autoComplete",32),x("completeMethod",function(b){return g(l),f(n.filterCustomers(b))})("input",function(b){return g(l),f(n.toUpperCase(b))})("onSelect",function(b){return g(l),f(n.selectCustomer(b))}),_(108,Un,2,2,"ng-template",33),s(),I(109,"input",34)(110,"input",35)(111,"input",36)(112,"input",37)(113,"input",38),a(114,"div",39),I(115,"input",40)(116,"i",41),a(117,"div",42)(118,"label"),d(119,"Total de items: "),a(120,"span",43),d(121),s()()()()()()()(),a(122,"div",44)(123,"form",29)(124,"div",45)(125,"div",46)(126,"p-floatLabel")(127,"p-autoComplete",47),x("completeMethod",function(b){return g(l),f(n.filterServices(b))})("onSelect",function(b){return g(l),f(n.selectService(b))}),_(128,jn,2,2,"ng-template",33),s(),a(129,"label"),d(130,"C\xF3digo"),s()()(),a(131,"div",46)(132,"p-floatLabel")(133,"p-autoComplete",48),x("completeMethod",function(b){return g(l),f(n.filterServices(b))})("onSelect",function(b){return g(l),f(n.selectService(b))}),_(134,Rn,2,1,"ng-template",33),s(),a(135,"label"),d(136,"Descripci\xF3n"),s()()(),a(137,"div",46)(138,"p-floatLabel"),I(139,"input",49),a(140,"label",50),d(141,"Cantidad"),s()()(),a(142,"div",46)(143,"p-floatLabel"),I(144,"input",51),a(145,"label",52),d(146,"Precio"),s()()(),a(147,"div",46)(148,"p-floatLabel"),I(149,"input",53),a(150,"label",54),d(151,"Descuento"),s()()(),a(152,"div",46)(153,"p-floatLabel"),I(154,"input",55),a(155,"label",56),d(156,"Impuesto"),s()()(),a(157,"div",46)(158,"p-floatLabel"),I(159,"input",57),a(160,"label",58),d(161,"Total Item"),s()()(),a(162,"div",59)(163,"i",60),x("click",function(){return g(l),f(n.addItem())}),s(),a(164,"i",61),x("click",function(){return g(l),f(n.resetForm())}),s()()()()(),a(165,"div",62)(166,"div",63)(167,"table")(168,"thead")(169,"tr")(170,"th"),d(171,"#"),s(),a(172,"th"),d(173,"C\xF3digo"),s(),a(174,"th"),d(175,"Descripci\xF3n"),s(),a(176,"th"),d(177,"Cantidad"),s(),a(178,"th"),d(179,"Precio"),s(),a(180,"th"),d(181,"Descuento"),s(),a(182,"th"),d(183,"Impuesto"),s(),a(184,"th"),d(185,"Total Item"),s(),I(186,"th"),s()(),a(187,"tbody"),_(188,Hn,19,8,"tr",64)(189,Kn,19,8,"tr",64),s()()()(),a(190,"footer",44)(191,"div",65)(192,"p"),d(193),s()()()()()}i&2&&(c(2),u("disabled",!n.isCxcLoaded),c(3),u("disabled",!n.isFormValid()),c(28),O("Bs: ",n.subtotalBs.toFixed(2),""),c(2),O("$: ",n.subtotalUsd.toFixed(2),""),c(7),O("Bs: ",n.discount.toFixed(2),""),c(2),O("$: ",(n.discount/n.usdPrice).toFixed(2),""),c(7),O("Bs: ",n.iva.toFixed(2),""),c(2),O("$: ",(n.iva/n.usdPrice).toFixed(2),""),c(7),O("Bs: ",n.totalBs.toFixed(2),""),c(2),O("$: ",n.totalUsd.toFixed(2),""),c(7),O("Bs: ",n.igtf.toFixed(2),""),c(2),O("$: ",n.igtf.toFixed(2),""),c(7),O("Bs: ",n.totalBs.toFixed(2),""),c(2),O("$: ",n.totalUsd.toFixed(2),""),c(8),v(n.prFactValueInt),c(4),v(Q(93,30,n.usdPrice,"1.2-2")),c(6),v(n.currentDate),c(4),v(n.dueDate),c(),u("formGroup",n.customersForm),c(4),u("suggestions",n.filteredCustomers)("field","id3"),c(14),v(n.totalItems),c(2),u("formGroup",n.invoiceForm),c(4),u("suggestions",n.filteredServices)("field","codserv"),c(6),u("suggestions",n.filteredServices)("field","descrip"),c(55),u("ngForOf",n.itemFactItems),c(),u("ngForOf",n.items),c(4),O("Versi\xF3n ",n.version,""))},dependencies:[ne,Ue,Zt,Y,zt,rt,Mt,Le,Be,St,Et,Ft,ti,Oe],styles:['@charset "UTF-8";html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0!important;padding:0!important;box-sizing:border-box;height:100%}.navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:2px 5px;box-shadow:0 0 8px #0000001a;width:100%;margin-bottom:16px;position:fixed;top:0;left:0;right:0;background-color:#fff;z-index:1000}.user[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;cursor:pointer}.logOut[_ngcontent-%COMP%]     .p-button{background-color:#fff;border-color:#fff;height:1vh;color:#000;width:100%}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:last baseline;gap:10px;color:#00f}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px}.user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px}.main-container[_ngcontent-%COMP%]{display:flex}.main-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{margin-top:11vh}.sidebar[_ngcontent-%COMP%]{width:100px;background-color:#f8f9fa;padding:10px;display:flex;flex-direction:column;gap:10px;margin-top:12vh}.menu-button[_ngcontent-%COMP%]{padding:10px;background-color:#007bff;color:#fff;border:none;cursor:pointer;text-align:left;width:100%}.menu-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.content[_ngcontent-%COMP%]{flex:1;padding:10px}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:flex-start;align-items:flex-start;gap:10px;width:100%}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;flex:1;background-color:#f0f0f0;border-radius:15px}.top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;border-bottom:1px solid #000;font-size:15px;gap:80px}.right[_ngcontent-%COMP%], .left[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column;flex:1}.mid[_ngcontent-%COMP%]{margin-top:10px;width:100%}.table-bg[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:flex-start;background-color:#f0f0f0;padding:10px;border-radius:15px;box-shadow:0 4px 8px #0000001a;flex:1;height:33vh}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-radius:15px;overflow:hidden;background-color:#fff;box-shadow:0 4px 8px #0000001a;color:#333;height:31vh}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f2f2f2}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e0e0e0}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 12px;text-align:left}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;width:50%}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:end;align-items:center;text-align:right;gap:50px;width:100%;margin-top:3px}.table[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:8px}.table[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-left:8px}.table[_ngcontent-%COMP%]   tr.total-row[_ngcontent-%COMP%]{font-size:1.2em;color:#e0f7fa;background-color:#00f}.table[_ngcontent-%COMP%]   tr.total[_ngcontent-%COMP%]{font-size:1.2em;color:#00f;background-color:#e0f7fa}.total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:40px;font-weight:700}.input-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px;width:100%;padding-bottom:5px}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:15%}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:10px;margin-bottom:5px}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none!important;border-bottom:1px solid blue!important;padding:5px;width:80%!important;border-radius:0%}  .input-group .p-autocomplete.p-component.p-inputwrapper .p-autocomplete-input{border:none!important;border-bottom:1px solid blue!important;padding:5px!important;width:80%!important;border-radius:0%!important;box-shadow:none!important}.icons[_ngcontent-%COMP%]{display:flex;gap:3px;flex-direction:row}.blue-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%]{color:#fff;padding:5px 10px;border-radius:10px;cursor:pointer;display:flex;justify-content:center;align-items:center}.blue-icon[_ngcontent-%COMP%]{background-color:#00f;height:4vh}.red-icon[_ngcontent-%COMP%]{background-color:red;height:4vh}.user-panel[_ngcontent-%COMP%]{flex:1;background-color:#f0f0f0;padding:10px;border-radius:15px}.tittles[_ngcontent-%COMP%]{color:red!important}.tittle[_ngcontent-%COMP%]{color:#000!important;font-weight:lighter}.title[_ngcontent-%COMP%]{font-weight:700;color:#00f!important}.top[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.discount[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:8px}.discount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:20%!important;height:4vh}.down[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;gap:10px}.down[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:5vh;width:30%}.down[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:2px;line-height:3vh;height:1vh}.client-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;gap:5px}.client-data[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:3vh}  .client-data .p-autocomplete.p-component.p-inputwrapper .p-autocomplete-input{height:3vh;width:100%!important}  .client-data .p-autocomplete.p-component.p-inputwrapper{width:100%}.custom-size[_ngcontent-%COMP%]     .p-dropdown{width:100%!important;height:4vh;display:flex;align-items:center}.custom-size[_ngcontent-%COMP%]     .p-dropdown-label{height:100%;line-height:4vh;display:flex;align-items:center}.custom-size[_ngcontent-%COMP%]     .p-dropdown-trigger{height:100%;display:flex;align-items:center}.btns[_ngcontent-%COMP%]{width:100%}.options[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;color:#fff}.btn[_ngcontent-%COMP%]     .p-button{background-color:#000!important;border-color:#000!important;height:4.5vh;color:#fff!important;width:100%}.btn2[_ngcontent-%COMP%]     .p-button{background-color:red!important;border-color:red!important;height:4.5vh;color:#fff!important;width:100%}.pay[_ngcontent-%COMP%]{margin-top:10px;width:100%;display:flex;justify-content:center;align-items:center}.pagar[_ngcontent-%COMP%]     .p-button{height:4.5vh;background-color:#00f!important;border-color:#00f!important;color:#fff!important;width:100%;text-align:center}.autocomplete-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0;border:1px solid #ccc;max-height:150px;overflow-y:auto;position:absolute;background-color:#fff;z-index:1000;width:100%}.autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px;cursor:pointer}.autocomplete-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.items-table-container[_ngcontent-%COMP%]{max-height:360px;overflow-y:auto;margin-top:16px;display:block}.items-table[_ngcontent-%COMP%]{display:block}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;display:table;margin-bottom:20px}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:right;vertical-align:middle;display:table-cell}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#00f;color:#fff;font-weight:700;text-align:center;vertical-align:middle;display:table-cell}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table-header-group}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:table-row-group}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table-row}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}.items-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.code[_ngcontent-%COMP%], .descrip[_ngcontent-%COMP%]{text-align:left!important}.total-items[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:end;font-weight:700;margin-right:5px}.items[_ngcontent-%COMP%]{font-weight:lighter}.footer-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;font-weight:700;position:fixed;bottom:0;background-color:#f8f9fa;padding:10px 0;text-align:center;height:5vh}@media (max-width: 1200px){.form[_ngcontent-%COMP%], .user-panel[_ngcontent-%COMP%]{width:70%}.right[_ngcontent-%COMP%], .left[_ngcontent-%COMP%]{width:100%}.input-group[_ngcontent-%COMP%]{width:25%}}@media (max-width: 992px){.navbar[_ngcontent-%COMP%]{margin-bottom:70px}.form[_ngcontent-%COMP%], .user-panel[_ngcontent-%COMP%]{width:80%}.right[_ngcontent-%COMP%], .left[_ngcontent-%COMP%]{width:100%}.input-group[_ngcontent-%COMP%]{width:50%}}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{margin-bottom:70px}.container[_ngcontent-%COMP%]{flex-direction:column-reverse}.form[_ngcontent-%COMP%], .user-panel[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]{width:100%}}@media (max-width: 1024px) and (max-height: 768px){.navbar[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]{margin-top:100px}.items-table-container[_ngcontent-%COMP%]{max-height:180px;overflow-y:auto;margin-top:16px;display:block}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{gap:20px}.total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{gap:15px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:40%}}@media (max-width: 1440px) and (max-height: 768px){.navbar[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]{margin-top:100px}.items-table-container[_ngcontent-%COMP%]{max-height:240px;overflow-y:auto;margin-top:16px;display:block}}@media (max-width: 2560px) and (max-height: 768px){.navbar[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]{margin-top:100px}.items-table-container[_ngcontent-%COMP%]{max-height:240px;overflow-y:auto;margin-top:16px;display:block}}@media (max-width: 768px) and (max-height: 768px){.navbar[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]{margin-top:100px}.items-table-container[_ngcontent-%COMP%]{max-height:240px;overflow-y:auto;margin-top:16px;display:block}}@media (max-width: 576px){.form[_ngcontent-%COMP%], .user-panel[_ngcontent-%COMP%]{width:100%;padding:0 10px}.input-group[_ngcontent-%COMP%], .right[_ngcontent-%COMP%], .left[_ngcontent-%COMP%]{width:100%}}@media (max-width: 400px){.form[_ngcontent-%COMP%], .user-panel[_ngcontent-%COMP%]{width:100%;padding:0 5px}.input-group[_ngcontent-%COMP%], .right[_ngcontent-%COMP%], .left[_ngcontent-%COMP%]{width:100%}}']});let o=r;return o})();var Gn=[{path:"",component:ni}],oi=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=z({type:r}),r.\u0275inj=B({imports:[de.forChild(Gn),de]});let o=r;return o})();var wa=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=z({type:r}),r.\u0275inj=B({imports:[X,oi,je,Jt,jt,Ne,ei,Lt,ii]});let o=r;return o})();export{wa as InvoiceFormModule};
